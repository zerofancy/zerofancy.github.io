<!DOCTYPE html>
<html lang="zh-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>归零幻想</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/idea.min.css"
        integrity="sha512-Rfc5zQIp95eozfMCdS3B4MItUxU8orNje/t1OEhf7XwIk0DTCuMH2LG0NIgP8UGYK9L39WfUNI1c4IsM5yY/PA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
    </style>
</head>

<body>
    <nav class="container navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="/favicon.ico" alt="归零幻想" width="20px" height="20px">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/tag.html">标签</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about">关于</a>
                    </li>
                    <!--
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Dropdown
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                    </li>
                -->
                </ul>
                <!--
                <form class="d-flex">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
                -->
            </div>
        </div>
    </nav>

    <div class="container mt-3">
        <div class="row">
            <div class="card col" style="background-color: #f1f1f1;" id="content-container">
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">把你的光猫变成一个丐版nas</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><h1 id="把你的光猫变成一个丐版nas">把你的光猫变成一个丐版NAS</h1>
<p>我的初衷是调研下光猫改桥接的可行性，结果拿到超级管理员密码后还是没有这个选项。但在这个过程中发现直接在光猫上跑个下载服务却是可行的。</p>
<h2 id="允许ftp访问和telnet访问">允许FTP访问和telnet访问</h2>
<p>访问 http://192.168.1.1 ，输入密码后进入光猫管理后台。这里我找到“上网帐号设置”，备份宽带帐号和密码。不得不说他系统还是挺拉的，密码框直接用审查元素功能把 type 改为 input 就可以看到密码了。</p>
<p>第一步后台不要退出，访问 http://192.168.1.1/servmngr.html 。这里看到一个空白页面，审查元素后发现大有乾坤。 <img src="https://images.ntutn.top/2022/04/78e9db7285fda2ee43fd5901902d3208.png" alt="img" /></p>
<p>将这些代码取消注释，此时网页还是空白的，但是用 Ctrl+A 可以看到实际是有内容的。在这个页面开启 telnet 访问，并设置密码。注意用户名为 admin 不要改，否则后面 telnet 登陆不进去。</p>
<p><code>telnet 192.168.1.1</code> 成功后执行<code>sh</code>。然后<code>uname -a</code>看下。这里我就不记录查看管理员密码步骤了，反正这个型号管理员面板也没有设置桥接的选项。</p>
<h2 id="开始整活">开始整活</h2>
<p><code>top</code>，发现占用内存最高的是个两个 java 进程。<code>java -version</code>，发现安装了 java8 。</p>
<pre><code class="language-plain"># java -version
openjdk version &quot;1.8.0-internal&quot;
OpenJDK Runtime Environment (build 1.8.0-internal-jenkinsang_2022_01_15_04_03-b00)
JamVM (build 2.0.0, inline-threaded interpreter with stack-caching)
</code></pre>
<p><code>free</code>命令可知总内存约二十多兆，剩余仅 3 兆。这点空间是搞不了什么事情的，因此我尝试干掉前述两个 java 进程。<code>ps -aux | grep java</code>，发现除了存在两个 java 进程，还写了脚本自动把这两个进程拉起来，即<code>/etc/monitor_java.sh</code> 。统统 kill 掉。</p>
<p>现在有 10 兆左右的内存了，对于 java 来说可能还是不太能搞事，但跑个 aria2 足够了！尝试插入 U 盘，发现在<code>/mnt/usb1_1</code>自动挂载。</p>
<p>交叉编译 aria2c ，这里我用的是这个脚本：https://gitee.com/logic_2050/auto-build-aria2-mips32-static 。在我的 debian11 编译过程中只遇到一个问题，手动<code>sudo apt install autoreconf</code>即可。</p>
<p>如何把文件弄到光猫里，以及取出来？每次插拔 U 盘也太麻烦了。于是我找到一个支持上传的简单文件服务器：https://github.com/mayth/go-simple-upload-server。仍然交叉编译到 mips 静态包。<code>env GOOS=linux GOARCH=mips GOMIPS=softfloat go build -trimpath -ldflags=&quot;-s -w -extldflags=-static&quot;</code></p>
<h2 id="成品">成品</h2>
<p><img src="https://images.ntutn.top/2022/04/bc80e51855b842dedd7268113042e378.png" alt="img" /></p>
<h2 id="拓展">拓展</h2>
<h3 id="被我干掉的两个-java-进程是做什么的">被我干掉的两个 java 进程是做什么的</h3>
<p>光猫跑 java 属实有点离谱，一半内存都是他们占的，干掉后也不影响上网，甚至也不影响光猫后台管理。嗯，有点耐人寻味。</p>
<h3 id="ftp访问为空白">FTP访问为空白</h3>
<p>经测试，该型号FTP访问根目录是一片空白，但大多数子目录还是可以正常访问的，如<code>/mnt/usb1_1</code>，完全能满足要求。</p>
<h3 id="无法执行重启后文件丢失">无法执行/重启后文件丢失</h3>
<p>有些目录下是无法写入的，有些虽然可以写入，但是重启会丢失，还有些目录下无法执行程序。</p>
<p>我选择把整活用的程序放到<code>/fhconf/</code>下，因为光猫自己的配置文件备份就放在这里，显然这里是不会重置的。</p>
<h3 id="支持-https">支持 https</h3>
<p>只要将你的电脑下的<code>/etc/ssl/certs/ca-certificates.crt</code>文件复制到光猫下，并在aria2的配置文件中指定就可以了。</p>
<pre><code>ca-certificate=/fhconf/custom/aria2/ca-certificates.crt
</code></pre>
<h3 id="oom">OOM</h3>
<p>尽管aria2确实已经很省资源了，但当尝试BT下载一个比较大的文件时（超过2GB）还是很容易占用超过10M内存，然后关键进程OOM就巴比Q了。我尝试过修改配置文件，关闭disk-cache、关闭预分配甚至限制下载速度等均无法解决。所以该方案的实用性其实并不是很高。</p>
<blockquote>
<p>也无所谓，生命在于折腾嘛。</p>
</blockquote>
<p>也许设置swap可以解决这个问题，但默认没有这个命令，估计还得去编译busybox。唉，算了吧……</p>
</p>
                            <a href="article/7/2.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">AUIL学习</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><h1 id="auil-源码学习-重点问题">AUIL 源码学习 重点问题</h1>
<p>AUIL是个比较知名的图片加载库，源码结构比较清晰和简单，我在阅读学习中整理了以下内容。</p>
<h2 id="memorycache">MemoryCache</h2>
<p>顾名思义，这个是在内存中缓存Bitmap相关的代码。</p>
<p><img src="https://images.ntutn.top/2022/02/04ac71a8c8e1622e2bc287f2fd6e92cf.svg" alt="auil" /></p>
<p>MemoryCache结合了策略模式和装饰器模式，初始化时可选择不同缓存策略。</p>
<p>一个Cache类内部持有一定量的Bitmap元素，并根据某种策略自动移除未使用的Bitmap。看结构我们应该从BaseMemoryCache开始看起。</p>
<p>BaseMemoryCache中持有了所有放入的元素的弱引用，而它的子类根据策略持有了部分缓存对象的强引用。</p>
</p>
                            <a href="article/7/1.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">给APP添加构建信息</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><h1 id="给app添加构建信息">给APP添加构建信息</h1>
<blockquote>
<p>这两天在琢磨一个问题，一个APP是怎么知道自己是怎么来的呢？</p>
</blockquote>
<p>一个应用得知道自己是怎么来的，这样出了问题才知道该找谁。举个例子，当应用发生了一个线上crash，崩溃信息收集上来，然后我们打开堆栈一看懵了——这个发生崩溃的<code>v5.c</code>是哪个类呢？</p>
<p><img src="https://images.ntutn.top/2022/01/9616ad8a32ec122442705981e9e97847.png" alt="crash" /></p>
<p>显然，代码被混淆过，我们要拿到编译时生成的<code>mapping.txt</code>来还原堆栈，如图</p>
<p><img src="https://images.ntutn.top/2022/01/aaa2591c565385ad28ce781047c567e5.png" alt="retrace" /></p>
<p>**然而，我们编译了很多次，客官您要的是哪次的mapping文件呢？**显然，我们不仅要保留每次构建的相关信息，还得能准确区分开每次构建的产物，能做到有问题立即查询到对应构建信息。</p>
<p>应用需要知道自己是“<em>怎么来的</em>”。</p>
</p>
                            <a href="article/7/0.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">gradle学习笔记</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><p>新建一个安卓项目，<code>Android Studio</code>已经为我们生成的模板中，<code>build.gradle</code>总是很显眼。我也终于下定决心来了解下这个构建整合工具。</p>
<p>gradle脚本使用<code>groovy</code>编写，最近也开始支持用<code>Kotlin</code>编写。Kotlin大法好，但我暂时只找到了groovy的教程<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup>，暂时不想去啃英文，先将就学着。</p>
<h2 id="gradle安装">gradle安装</h2>
<h3 id="命令">命令</h3>
<p>对于OSX用户来说，<code>brew install gradle</code>就可以搞定这个步骤了。但是这里有个问题，就是这样会把openjdk当做依赖装上。也不算很大的问题，也能将就用。</p>
<h3 id="gradle-wrapper">gradle wrapper</h3>
<p>gradle有一个很方便的命令，<code>gradle wrapper</code>，使用后会创建如下的目录结构</p>
<pre><code>.
├── build.gradle
├── gradle
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew
└── gradlew.bat
</code></pre>
<p>此时即使你没有安装gradle，仍然可以使用<code>./gradlew</code>代替<code>gradle</code>执行命令。如<code>./gradlew clean install</code>。在实际的项目中，这种方式使用比较普遍，因为gradle脚本很多特性受版本影响比较大，一般gradle的版本也会在项目中指定。</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn-1">
<p><a href="https://wiki.jikexueyuan.com/project/GradleUserGuide-Wiki/">Gradle User Guide 中文版</a></p>
<a href="#fnref-1" class="footnote-backref">&#8617;</a>
</li>
</ol>
</div>
</p>
                            <a href="article/6/3.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">java默认修饰符问题</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><h2 id="问题描述">问题描述</h2>
<p>和工具线配合完成某个需求，我这边的改动很少，但一鼓作气搞完后却遇到了奇怪的报错。已知工具线的代码大多是java的，而我这边自然是力推Kotlin。我们的代码参考如下：</p>
<h3 id="代码参考">代码参考</h3>
<p>工具线定义了一个接口用于callback</p>
<pre><code class="language-java">package a;

interface IPublishCallback {
    void onFinish();
}

</code></pre>
<p>工具线在执行完发布逻辑后无论成功还是失败都会调用我们的callback</p>
<pre><code class="language-java">package a;

public class PublishUtil {
    public static void publishVideo(String videoName, IPublishCallback callback) {
        Runnable runnable = () -&gt; {
            try {
                System.out.println(&quot;[&quot; + videoName + &quot;]开始执行耗时发布操作……&quot;);
                Thread.sleep(1000L);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            callback.onFinish();
        };
        Thread thread = new Thread(runnable);
        thread.start();
        try {
            thread.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<p>我们这边的实现是Kotlin的，就是调用了下工具线的方法</p>
<pre><code class="language-kt">package b

import a.PublishUtil

class ShareFromSdkImpl {
    fun doShare() {
        println(&quot;系统分享功能测试&quot;)
        PublishUtil.publishVideo(&quot;测试视频&quot;) {
            println(&quot;发布视频完成回调&quot;)
        }
        println(&quot;完成系统分享方法&quot;)
    }
}
</code></pre>
<p>主函数</p>
<pre><code class="language-kt">import b.ShareFromSdkImpl

fun main() {
    ShareFromSdkImpl().doShare()
}
</code></pre>
<h2 id="问题">问题</h2>
<p>上述代码在执行后输出如下：</p>
<pre><code class="language-plain">系统分享功能测试
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: a/IPublishCallback
	at b.ShareFromSdkImpl.doShare(ShareFromSdkImpl.kt:8)
	at MainKt.main(main.kt:4)
	at MainKt.main(main.kt)
Caused by: java.lang.ClassNotFoundException: a.IPublishCallback
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)
	... 3 more

Process finished with exit code 1

</code></pre>
<p>在安卓中略有不同，异常类型为</p>
<p>java.lang.IllegalAccessError: Interface a.IPublishCallback implemented by class com.ss.android.ugc.aweme.plugin.xground.player……</p>
<h2 id="排查">排查</h2>
<p>注意报错中提到的<code>a/IPublishCallback</code>，是我们前面定义的回调接口。</p>
<p>我们将lambda改为匿名内部类的写法，这才发现确实是找不到。</p>
<p><img src="https://i.loli.net/2021/08/06/nrZt3QkqDLojcf5.png" alt="2021-08-06_01-33.png" /></p>
<p>在使用Lambda形式实现回调时这个错误没有被编译器检查出来，运行时才报出来。</p>
</p>
                            <a href="article/6.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">我的黑历史被github埋到北极了</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><p>昨天整理自己的github仓库的时候发现自己的个人主页多了个徽章：<code>Arctic Code Vault Contributor</code></p>
<p><img src="https://i.loli.net/2021/01/26/CJOcmPn12o734KQ.png" alt="QQ20210126-143812@2x.png" /></p>
<p>So what happened?</p>
</p>
                            <a href="article/7.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">用Compose重构我的连连看游戏</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><p>此前的文章中提到，我闲暇时写了个连连看游戏。因为比较闲，正好又对Jetpack Compose比较感兴趣，于是我想用Compose重构界面，学习下Compose的使用。
然后没有花费太大力气就完成了。</p>
<p><a href="https://github.com/zerofancy/match/blob/main/app/src/main/java/top/ntutn/match/GameViewModelCompose.kt">GameViewModelCompose.kt</a></p>
<p>于是我想，既然用上Compose了，是不是可以直接迁移到桌面平台？</p>
<p>这篇文章实际上没什么内容，就是对于折腾过程的一个简单记录，最后的成品在github，直接<a href="https://github.com/zerofancy/match-m">去看代码</a>就可以了。</p>
</p>
                            <a href="article/8/1.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">他的朋友们</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><ul>
<li><a href="https://blog.semesse.me/">色魔是色魔</a></li>
<li><a href="http://www.xyx6.top/">XYX</a></li>
<li><a href="http://upccaishu.top/">菜树</a></li>
<li><a href="https://www.ruiovo.top/">ruiOvO</a></li>
</ul>
</p>
                            <a href="article/2/0.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">安卓连连看游戏设计</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><p>字节取消大小周了，于是周末时间多起来了。虽然想着到处去玩，但现在疫情形势又不好了，于是安心呆在家里当一个肥宅。除了补一补番剧，就是把之前就想过的连连看游戏做出来了。</p>
<p>连连看游戏规则简单，点击两个相同的元素，如果他们能在两次拐弯以内连接起来，那么就可以消除。消除后就会出现空位，可以连接的就更多了。在规定时间内连续操作，直到消除所有元素。</p>
<p>虽然规则比较简单，但真正动手实现一遍还是很费工夫的。游戏既然做好了，那么我水一篇博客不过分吧:&gt;</p>
<p><img src="https://s3.jpg.cm/2021/08/08/IAjmPL.jpg" alt="连连看游戏界面" /> <sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup></p>
<p>项目的代码我放到了github。写的贼丑，轻喷。 <a href="https://github.com/zerofancy/match">https://github.com/zerofancy/match</a></p>
<div class="footnotes">
<hr />
<ol>
<li id="fn-1">
<p>本图片由<a href="https://imagelol.com/?utm_source=iplaysoft.com&amp;hmsr=iplaysoft.com">笑果图床</a> 提供支持。</p>
<a href="#fnref-1" class="footnote-backref">&#8617;</a>
</li>
</ol>
</div>
</p>
                            <a href="article/1/8.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>
                <div>
                    <div class="card mt-3">
                        <div class="card-body">
                            <h5 class="card-title">关于</h5>
                            <!-- <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6> -->
                            <p class="card-text"><h2 id="归零幻想">归零幻想</h2>
<img alt="归零幻想" src="/res/img/avatar.jpg" width="200px">
<hr />
<p>归零幻想是本人的网名啦，这里是我的博客小站。本人在其他地方帐号大多也叫这个名字。</p>
<p>本人2021年本科毕业于中国石油大学（华东），现在人在抖音。</p>
<p>博客系统至今我写过三个版本[^1]，毕竟写出个CRUD就可以厚着脸皮说自己是个博客了。当前版本最初是个Kotlin练手项目，源代码发布在<a href="https://github.com/zerofancy/kmdblog">github</a>。不过也就自用罢了，不会有人对我的代码感兴趣吧……</p>
<p>博客系统作为学生时代练手作品，问题多多，但段时间没有重构或更新的计划。毕竟人在火星，信号延迟高，更新博客都比较少了。</p>
</p>
                            <a href="article/1.html" class="card-link">阅读全文</a>
                        </div>
                    </div>
                    <!-- <a th:text="${i.title}" th:href="${i.url}">文章标题</a> -->
                </div>


                <!--第一页、最后一页、当前页、当前页上下页-->
                <nav aria-label="Page navigation example" class="mt-3 d-flex justify-content-center">
                    <ul class="pagination">
                        <li class="page-item disabled" aria-label="First">
                            <a class="page-link" href="/">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        
                        
                        <li class="page-item disabled"><a class="page-link" href="#">1</a></li>
                        <li class="page-item" aria-label="Next"><a
                                class="page-link" href="/index2.html">2</a></li>
                        <li class="page-item disabled"><a class="page-link"
                                href="#">...</a></li>
                        <li class="page-item" aria-label="Last">
                            <a class="page-link" href="/index7.html">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>

            </div>

            <div class="card col-md-4 d-none d-md-block ms-md-3 text-center">
                <div class="sticky-top">
                    <img src="/favicon.ico" alt="avatar" class="mt-3">
                    <div class="card-body">
                        <p class="card-text">
                            归零幻想
                        </p>
                        <p class="card-text">
                            邮件：<a href="mailto:admin@ntutn.top">admin@ntutn.top</a><br>
                            Telegram: <a href="https://t.me/zerofancy">@zerofancy</a>
                        </p>
                        <blockquote id="hitokoto">正在追番《艾克斯奥特曼》。</blockquote>
                        <div style="text-align:right;" id="hitokoto_from">——站长</div>
                        <a href="/atom.xml">RSS</a>
                    </div>
                    <div>
                        <p class="card-body">友情链接</p>
                        <ul>
                            <li><a href="https://blog.semesse.me/">色魔是色魔</a></li>
                            <li><a href="http://www.xyx6.top/">XYX</a></li>
                            <li><a href="http://upccaishu.top/">菜树</a></li>
                            <li><a href="https://www.ruiovo.top/">ruiOvO</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 一言
        let xhr = new XMLHttpRequest()
        xhr.open('get', 'https://v1.hitokoto.cn/')
        xhr.send()
        xhr.onload = function () {
            let hitokotoResult = JSON.parse(xhr.responseText)
            document.getElementById("hitokoto").innerText = hitokotoResult.hitokoto
            document.getElementById("hitokoto_from").innerText = "——" + hitokotoResult.from
        }
        // 页码
        var getRandomColor = function () {
            return '#' +
                (function (color) {
                    return (color += '0123456789abcdef'[Math.floor(Math.random() * 16)]) && (color.length == 6) ? color : arguments.callee(color);
                })('');
        }
        let pageWidth = window.innerWidth,
            pageHeight = window.innerHeight
        if (typeof innerWidth != 'number') {
            if (document.compatMode == 'CSS1Compat') {//严格模式
                pageWidth = document.documentElement.clientWidth
                pageHeight = document.documentElement.clientHeight
            } else {
                pageWidth = document.body.clientWidth
                pageHeight = document.body.clientHeight
            }
        }
        document.body.style.backgroundColor = getRandomColor();
        console.log(`https://source.unsplash.com/random/${pageWidth}x${pageHeight}`)
        document.body.style.backgroundImage = `url(https://source.unsplash.com/random/${pageWidth}x${pageHeight})`;
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/bash.min.js"
        integrity="sha512-HIFqAH4BgdlJE3A1Uoyl6weoDR1WtdufmKBPWtemvTI+12lrV5dfPR5ekvJaePkq6w+zuPAek2X2hHxo/T5kag=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/basic.min.js"
        integrity="sha512-8MrrYyqbmwVrcDGR/2VenE2+IX+ELHJxM0vysdjlAQrJyXZwfKl9dXdyWASFBKzuszu8z3G7XoyjeJVM3b9MlQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/c.min.js"
        integrity="sha512-+2nEdmDIEQVBw4y3LD2BLOgAvX1+xx9kPQawjQB/HNfi4bDgSF4ywg8yIQ67ijrLLO2ruHaX9dZ25ruG3HwZSg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/cpp.min.js"
        integrity="sha512-OsjySiIaNsR3uFe7uEH6yht3is/WrIXKocWeO0YHFs25jOwHwMtzIdkUENQjblQihTUIN78bpnLKbhMxRegjLw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/gradle.min.js"
        integrity="sha512-QXYGxsyYg6bKlr3W82K2fp25xklKskdnms2qEhgrm2Uz+dnDG3RCHmVP6GQ6waI34+lirlcgsdddvmSXbBhhhQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/groovy.min.js"
        integrity="sha512-wHPb/EJ15Z5bl59kfxL/THnrtIGdrlOD0CdeBKZ1tsgcLsmx4kbiTmB0gsPZUqCzgIB3MK9tBemnrIr41WFUkQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/java.min.js"
        integrity="sha512-5j3t2T2xf236N+J+QPE2Po6Q3P/SXze0hgt2XMi1mbYzkC2VqeB/DFYICXfMhV1V+KdxDOBp9PcCAebb8kLvSw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/javascript.min.js"
        integrity="sha512-Jvh5kXa0Zu4HoSxPaZIVhCWPkD7b7gnWHVzv6jiaJwAJ18a/U6BOXludYfJYwHorpy2WFH0Df6EcFi5udu1dWA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/json.min.js"
        integrity="sha512-z3sCqG8cfRJGXv+x7QvVAx92uACSYScuJCRQzSjEhAU23TabHD8+tqafvAbKterqaB4tkiVJYCFNhQaT1+QmfQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/kotlin.min.js"
        integrity="sha512-ZEBRAqmcLuQ5A9KdZIayen2HuDMAau0Q4C3s/gwnIldFSvOxAOXJk0zhEpu30ACABYAmHKNSZDmup5OEGbx+9g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/xml.min.js"
        integrity="sha512-1UdiK7+k2GhyGJMG9hmQXQ51TP2NPjHjh65uWhCeqSXSZ4UlzDG5+/st9VWRksKWYxKeU37/qwSAuPfSkcWD6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        hljs.highlightAll()
    </script>

    <!--图片调整-->
    <script>
        //获取图片元素
        var imgs = document.getElementsByTagName("img");
        //获取div元素   
        var contentLeft = document.getElementById("content-container");
        //使用js设置图片元素宽度的变化    
        for (var i = 0; i < imgs.length; i++) {
            imgs[i].style["max-width"] = contentLeft.offsetWidth - 60 + "px";
        }
            //40是要减去padding
    </script>

    <!--HTTPS重定向-->
    <script>
        if (!(window.location.host.startsWith("127.0.0.1") || window.location.host.startsWith("localhost")) && (window.location.protocol != "https:")) {
            window.location.protocol = "https";
        }
    </script>
</body>

</html>