<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-Hans">

<head>
    
    
    <title>计算机组成原理笔记--归零幻想的博客</title>
    <meta charset="UTF-8">
    <!--移动设备不缩放-->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="alternate" type="application/rss+xml" title="归零幻想" href="https://ntutn.top/rss.xml" />
    <!--github的markdown样式-->
    <link rel="stylesheet" href="/res/css/github-markdown.css">
    <!--一个基于bootstrap的样式-->
    <link rel="stylesheet" href="/res/css/main.css">

    <script src="/res/js/jquery.min.js"></script>
    <script src="/res/js/popper.min.js"></script>
    <script src="/res/js/bootstrap.min.js"></script>

    <style>
        /*图片缩放*/
        .imageWrapper {
            max-width: 500px;
            max-height: 100%;
            display: block;
            margin: 0 auto;
        }

        /*背景图片*/
        body {
            background: url(https://unsplash.it/1600/900?random);
            background-attachment: fixed;
            background-position: bottom center;
            background-size: cover;
        }
    </style>
    <script src="/res/js/zoomify.min.js"></script>
    <link href="/res/css/zoomify.min.css" rel="stylesheet">

    <script>
        $(document).ready(function () {
            $(".markdown-body img").each(function () {
                divImageWrapper = $(this).after("<div class='imageWrapper'></div>")
                $(this).appendTo($(this).next())
            })
            $(".markdown-body img").zoomify()
        })
    </script>
</head>

<body>
    <div class="container">
        <nav id="nav" class="navbar navbar-expand-lg navbar-light bg-light">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03"
                aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="/"><img src="/res/logo.png" width="70" height="40"
                    class="d-inline-block align-top" alt="">
                <span>归零幻想的博客</span></a>

            <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
                <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                    <li id="n_home" class="nav-item">
                        <a class="nav-link" href="/">主页</a>
                    </li>
                    <!-- <li id="n_tags" class="nav-item">
                        <a class="nav-link" href="/tags">标签</a>
                    </li> -->
                    <li id="n_about" class="nav-item">
                        <a class="nav-link" href="/about.html">关于</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/rss.xml">RSS</a>
                    </li>
                </ul>
            </div>
        </nav>
        <nav class="mt-3" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>

                <li class="breadcrumb-item active" aria-current="page">计算机组成原理笔记</li>
            </ol>
        </nav>
        <div class="card mt-3 mb-3">
            <div class="card-body markdown-body">
                <h1 class="card-title text-center realtitle">计算机组成原理笔记</h1>
                <!--TODO 时间-->
                <h6 class="card-subtitle mb-2 text-muted text-center">
                    发布时间：<span>2019-05-13</span>&nbsp;
                    修改时间：<span>2019-05-13</span>&nbsp;
                    作者：<span>归零幻想</span>
                </h6>
                <br>
                <div class="card-text"><h2 id="概述">概述</h2>
<p>计算机组成原理马上就要期中考试了，我也在积极准备复习，顺着课本也做了一波笔记，把每个部分的知识点都整理了一下。没理解的暂时还空着（比如海明校验码），有些整理起来不方便的也暂时空着，回头去查课本吧。</p>
<p>结课了，顺着课本捋了一遍，做的一些笔记：</p>
<h1 id="计算机组成原理">计算机组成原理</h1>
<h2 id="概述-1">概述</h2>
<h3 id="计算机硬件">计算机硬件</h3>
<ul>
<li>采用<strong>存储程序</strong>工作方式。</li>
<li>由<strong>运算器</strong>、<strong>控制器</strong>、<strong>存储器</strong>、<strong>输入设备</strong>、<strong>输出设备</strong>部件组成。</li>
<li>存储器：存储数据/指令
控制器：控制指令的自动执行
运算器：加减乘除、逻辑运算
操作人员通过输入输出设备控制计算机。</li>
<li>计算机内部以<strong>二进制</strong>表示指令和数据
指令由<strong>操作码</strong>和<strong>地址码</strong>组成。
总线：传输信息的介质。</li>
</ul>
<p>ALU：数据处理部件，执行算数和逻辑运算。</p>
<h3 id="计算机软件">计算机软件</h3>
<h2 id="计算机系统层次结构">计算机系统层次结构</h2>
<pre><code>应用（问题）        最终用户
算法                程序员
编程（语言）
操作系统/虚拟机
指令集体系结构（ISA）架构师
微体系结构
功能部件/RTL        电子工程师
电路
器件
</code></pre>
<ol>
<li>机器级语言</li>
</ol>
<blockquote>
<p>和运行程序的计算机底层结构密切相关。
可读性差，不易于记忆。</p>
</blockquote>
<ul>
<li>汇编语言</li>
<li>机器语言</li>
</ul>
<ol start="2">
<li>高级语言</li>
</ol>
<blockquote>
<p>和底层计算机结构关系不大。
可读性相当较好。</p>
</blockquote>
<p>大多数程序员使用高级语言编写程序。</p>
<h3 id="程序设计语言处理系统">程序设计语言处理系统</h3>
<ol>
<li>汇编程序：汇编器，汇编语言》机器语言</li>
<li>解释程序：解释器，将源程序中的语句按顺序逐条翻译并立即执行。</li>
<li>编译程序：编译器，高级语言》汇编语言/机器语言。</li>
</ol>
<h2 id="计算机系统的不同用户">计算机系统的不同用户</h2>
<h3 id="最终用户">最终用户</h3>
<p>使应用程序完成特定任务的用户。</p>
<p>简单的人机交互界面、安装在计算机中的相关应用程序。</p>
<h3 id="系统管理员">系统管理员</h3>
<p>利用操作系统等软件提供的功能对系统进行配置管理维护的操作人员。</p>
<p>部分硬件层面、系统管理层面、相关实用程序和人机交互界面。</p>
<h3 id="应用程序员">应用程序员</h3>
<p>使用高级语言编制应用软件的程序员。</p>
<p>硬件、操作系统提供的编程接口、人机交互界面、实用程序、相关的语言程序处理系统。</p>
<h3 id="系统程序员">系统程序员</h3>
<p>设计和开发系统软件的程序员。</p>
<p>计算机底层相关硬件和系统结构。</p>
<blockquote>
<p>一个人可以既是最终用户，又是系统管理员、……</p>
</blockquote>
<p>ISA处于硬件和软件交界面，是计算机系统核心部分。</p>
<h2 id="程序开发与执行过程">程序开发与执行过程</h2>
<p>对于</p>
<pre><code class="language-c">#include&lt;stdio.h&gt;

int main(){
    printf(&quot;Hello World!\n&quot;);
}
</code></pre>
<ol>
<li>通过程序编辑软件得到<code>hello.c</code></li>
<li>将<code>hello.c</code>预处理、编译、汇编、链接，生成可执行目标程序</li>
</ol>
<pre><code class="language-sh">gcc -o hello hello.c
</code></pre>
<p>预处理：将以<code>#</code>开头的命令进行处理
编译：编译得到汇编语言源程序
汇编：得到（二进制）可重定位目标文件
链接：多个可重定位目标文件和标准库函数合并为一个可执行目标文件。</p>
<p>启动和执行依靠操作系统的支持。</p>
<h3 id="程序与指令之间的关系">程序与指令之间的关系</h3>
<p>可执行程序目标文件包括机器代码段，执行实质是机器代码段执行。机器代码段由一条条指令构成。</p>
<p>指令是一个0/1序列，用来指示CPU完成一个特定的原子操作。</p>
<ul>
<li>操作码 指令操作类型</li>
<li>地址码 指令操作数的地址</li>
<li>立即数 具体一个数/偏移地址</li>
</ul>
<h3 id="指令的执行过程">指令的执行过程</h3>
<ul>
<li>根据PC取指令到IR</li>
<li>指令译码并送出控制信号</li>
<li>取操作数</li>
<li>指令执行</li>
<li>回写结果</li>
</ul>
<h2 id="计算机系统性能评价">计算机系统性能评价</h2>
<p>用户感觉到的时间分为CPU时间和其他时间。</p>
<p>CPU时间分为：</p>
<ul>
<li>用户CPU时间</li>
<li>系统CPU时间</li>
</ul>
<p>时钟周期：CPU的主脉冲信号宽度。</p>
<p>时钟频率：CPU的主脉冲信号的频率，时钟周期的倒数。</p>
<p>CPI：执行一条指令所用的时钟周期数</p>
<p>$$CPU执行时间=\frac{程序所含时钟周期数}{时钟频率}=程序所含时钟周期数×时钟周期$$</p>
<p>$$程序总时钟周期数=程序所含指令条数×CPI$$</p>
<p>n种不同指令，第i条指令数和CPI已知综合CPI：</p>
<p>$$程序总时钟周期数=\sum_{i=1}^n(CPI_i\times F_i)$$</p>
<p>所以：
$$CPU执行时间=CPI\times 程序总指令条数\times 时钟周期$$</p>
<h2 id="用指令执行速度进行性能评估">用指令执行速度进行性能评估</h2>
<p>MIPS：指令速度的单位，每秒钟执行多少百万条指令。</p>
<p>相对MIPS：被测机型速度是相对参考机型的多少倍。</p>
<blockquote>
<p>不同机器用MIPS进行性能比较是不准确/不客观的：</p>
</blockquote>
<ul>
<li>M1上一条指令的功能，M2上要多条指令来完成</li>
<li>不同机器的CPI和时钟周期不同，执行一条指令所用的时间也不同。</li>
</ul>
<hr />
<h2 id="数据的机器级表示">数据的机器级表示</h2>
<blockquote>
<p>二进制八进制十六进制十进制写法标记（开头）</p>
</blockquote>
<ul>
<li>十进制非零开头</li>
<li>二进制0b开头</li>
<li>八进制0开头</li>
<li>十六进制0x开头</li>
</ul>
<blockquote>
<p>进制简化符号（结尾）</p>
</blockquote>
<ul>
<li>二进制 B（Binary）</li>
<li>八进制 （Octal）</li>
<li>十进制 D（Decimal）</li>
<li>十六进制 H（Hexadecimal）</li>
</ul>
<h3 id="数制和编码">数制和编码</h3>
<p>信息使用二进制编码原因：</p>
<ul>
<li>二进制只有两种状态，制作有两种稳态的物理器件很方便。</li>
<li>编码和运算规则简单，可以开关电路实现，简单易行。</li>
<li>1、0对应逻辑真假，为逻辑运算和逻辑判断提供便利条件，可以用逻辑门电路实现算术运算。</li>
</ul>
<h3 id="进位计数制">进位计数制</h3>
<p>（略）</p>
<h3 id="定点与浮点表示">定点与浮点表示</h3>
<ol>
<li>定点 小数点固定</li>
<li>浮点 尾数决定表示精度，指数决定表示范围</li>
</ol>
<h3 id="定点数的编码表示">定点数的编码表示</h3>
<ul>
<li>真值：现实世界带有正负号的数。</li>
<li>原码：符号位后跟数值位。</li>
<li>反码：正数不变，数（除符号位）按位取反</li>
<li>补码：正数不变，负数反码加一</li>
</ul>
<p>已知反码/补码求原码，同上述操作。</p>
<ul>
<li>移码：每个数加一个偏置常数</li>
</ul>
<blockquote>
<p>若将移码第一位看做符号位，则同一个真值的移码和补码只有符号位不同</p>
</blockquote>
<h2 id="整数的表示">整数的表示</h2>
<h3 id="无符号整数的表示">无符号整数的表示</h3>
<p>无符号位，略</p>
<h3 id="带符号数的表示">带符号数的表示</h3>
<p>常用补码表示。优点：</p>
<ol>
<li>0的表示形式唯一</li>
<li>可以用加法实现减法运算，符号位可以参与运算</li>
<li>与原码和反码相比，多一个最小负数</li>
<li>不需要通过循环进位调整结果</li>
</ol>
<h3 id="c语言中的整数类型">C语言中的整数类型</h3>
<p>（略）</p>
<h2 id="实数的表示">实数的表示</h2>
<blockquote>
<p>计算机中用浮点数表示实数</p>
</blockquote>
<h3 id="浮点数的表示格式">浮点数的表示格式</h3>
<p>（无）</p>
<h3 id="浮点数的规格化">浮点数的规格化</h3>
<p>规格化数：尾数最高位具有非零数字</p>
<ul>
<li>右归：有效数字在小数点之前，需右归。尾数每右移一位，阶码+1。</li>
<li>左归：……</li>
</ul>
<h3 id="ieee754浮点数标准">IEEE754浮点数标准</h3>
<ul>
<li>32位单精度 1符号 8阶码 32尾数</li>
<li>64位双精度 1符号 11阶码 52尾数</li>
</ul>
<p>尾数用原码，1在小数点之前（省略第一个1）</p>
<p>指数用移码</p>
<h3 id="c语言中的浮点数类型">C语言中的浮点数类型</h3>
<table>
<thead>
<tr><th>转换</th><th>int</th><th>float</th><th>double</th></tr>
</thead>
<tbody>
<tr><td>int</td><td>-</td><td>可能有数据被舍入</td><td>保留精确值</td></tr>
<tr><td>float</td><td>可能向0方向截断，可能溢出</td><td>-</td><td>保留精确值</td></tr>
<tr><td>double</td><td>可能向0方向截断，可能溢出</td><td>可能有数据被舍入，可能溢出</td><td>-</td></tr>
</tbody>
</table>
<h2 id="十进制数的表示">十进制数的表示</h2>
<h3 id="ascii字符表示">ASCII字符表示</h3>
<p>将数看做字符串，方便输入输出，但运算不方便。</p>
<h3 id="用bcd码表示">用BCD码表示</h3>
<ul>
<li>有权BCD码</li>
</ul>
<p>8421</p>
<ul>
<li>无权BCD码</li>
</ul>
<p>余三码、格雷码</p>
<h2 id="非数值数据的编码表示">非数值数据的编码表示</h2>
<h3 id="逻辑值">逻辑值</h3>
<p>0 1</p>
<h2 id="数据的宽度和存储">数据的宽度和存储</h2>
<h3 id="数据的宽度和单位">数据的宽度和单位</h3>
<ul>
<li>字 用来处理信息的单位，用来度量各种数据类型的宽度</li>
<li>字长 表示进行数据运算、存储、传送的各种部件的宽度，反映计算机处理信息的能力</li>
</ul>
<h3 id="数据的存储和排列顺序">数据的存储和排列顺序</h3>
<p>i=01234567H</p>
<p>&amp;i=0800H</p>
<table>
<thead>
<tr><th>地址</th><th>0800H</th><th>0801H</th><th>0802H</th><th>0803H</th></tr>
</thead>
<tbody>
<tr><td>大端方式</td><td>01H</td><td>23H</td><td>45H</td><td>67H</td></tr>
<tr><td>小端方式</td><td>67H</td><td>45H</td><td>23H</td><td>01H</td></tr>
</tbody>
</table>
<h2 id="数据校验码">数据校验码</h2>
<h3 id="奇偶校验码">奇偶校验码</h3>
<p>不能确定错误位置，没有纠错能力。</p>
<ul>
<li>奇校验位 有奇数个1时P取0</li>
</ul>
<p>$$B=b_{n-1}\oplus b_{n-2}\oplus \ldots \oplus b_1 \oplus b_0 \oplus 1$$</p>
<ul>
<li>偶校验位</li>
</ul>
<p>$$B=b_{n-1}\oplus b_{n-2}\oplus \ldots \oplus b_1 \oplus b_0$$</p>
<h3 id="海明校验码">海明校验码</h3>
<p>（待补全）</p>
<h3 id="循环冗余校验码">循环冗余校验码</h3>
<p>（待补全）</p>
<hr />
<h2 id="高级语言和机器指令中的运算">高级语言和机器指令中的运算</h2>
<h3 id="c程序中涉及的运算">C程序中涉及的运算</h3>
<h3 id="mips指令中涉及的运算">MIPS指令中涉及的运算</h3>
<h2 id="基本运算部件">基本运算部件</h2>
<h3 id="串行进位加法器">串行进位加法器</h3>
<h3 id="并行进位加法器">并行进位加法器</h3>
<h3 id="带标志加法器">带标志加法器</h3>
<h3 id="算数逻辑部件">算数逻辑部件</h3>
<h2 id="定点数运算">定点数运算</h2>
<h3 id="补码加减运算">补码加减运算</h3>
<pre><code>Latex公式无法显示，反而导致后面排版错位……
$$
\begin{cases}
[x+y]_补=[x]_补+[y]_补(mod 2^n)\\\\
[x-y]_补=[x]_补+[-y]_补(mod 2^n)
\end{cases}
$$
</code></pre>
<pre><code>    CF—进位标志，加法时的最高位（D7或D15）产生进位或减法时最高位出现借位，则CF=1，否则CF=0；
    AF—辅助进位标志，供BCD码使用。当D3位出现进位或借位时AF=1，否则AF=0；
    OF—溢出标志，带符号数进行算术运算时，其结果超出了8位或16位的表示范围，产生溢出，则OF=1，否则OF=0；
    ZF—零标志，运算结果各位都为零，则ZF=1，否则ZF=0；
    SF—符号标志，运算结果为负数时，即运算结果的最高位为1，则SF=1，否则SF=0；
    PF—奇偶标志，反映操作结果中“1”的个数的情况，若有偶数个“1”，则PF=1，否则PF=0。
3个控制标志位
   DF—方向标志，用来控制数据串操作指令的步进方向；
    当设置DF=1时，将以递减顺序对数据串中的数据进行处理。当设置DF=0时，递增。
   IF—中断允许标志，当设置IF=1，开中断，CPU可响应可屏蔽中断请求；当设置IF=0时，关中断，CPU不响应可屏蔽中断请求。 
   TF—陷阱标志，为程序调试而设的。当设置TF=1，CPU处于单步执行指令的方式；当设置TF=0时，CPU正常执行程序。
</code></pre>
<h3 id="原码加减运算">原码加减运算</h3>
<h3 id="移码加减运算">移码加减运算</h3>
<h3 id="原码乘法运算">原码乘法运算</h3>
<h4 id="原码一位乘">原码一位乘</h4>
<ol>
<li>确定乘机的符号位</li>
<li>计算乘积的数值位</li>
</ol>
<blockquote>
<p>自行查书看样例掌握无符号数相乘运算</p>
</blockquote>
<h4 id="补码一位乘">补码一位乘</h4>
<h4 id="原码一位除">原码一位除</h4>
<h4 id="补码一位除">补码一位除</h4>
<h2 id="浮点数运算">浮点数运算</h2>
<h3 id="浮点数加减运算">浮点数加减运算</h3>
<ul>
<li>对阶</li>
<li>尾数加减</li>
<li>规格化</li>
<li>舍入</li>
</ul>
<h2 id="运算部件的组成">运算部件的组成</h2>
<blockquote>
<p>所谓运算部件，通常是指ALU、移位器、存放临时数据的寄存器，加上用于数据选择的多路选择器和实现数据传送的总线等构成的一个运算数据通路。</p>
</blockquote>
<h1 id="指令系统">指令系统</h1>
<h2 id="指令格式设计">指令格式设计</h2>
<h3 id="指令地址码的个数">指令地址码的个数</h3>
<p>每条指令必须包含：</p>
<ul>
<li>操作码 指定操作类型</li>
<li>源操作数或地址</li>
<li>结果的地址</li>
<li>下一条指令地址</li>
</ul>
<h3 id="指令格式设计原则">指令格式设计原则</h3>
<ol>
<li>指令应尽量短 减少空间开销</li>
<li>要有足够的操作码位数 向后兼容，预留</li>
<li>操作码的编码必须有唯一解释</li>
<li>指令长度应是字节的整数倍 便于指令的读取和指令地址的计算</li>
<li>合理选择地址字段的个数 空间开销与事件开销权衡</li>
<li>指令应尽量规整 简化硬件的设计</li>
</ol>
<h2 id="指令系统的设计">指令系统的设计</h2>
<ul>
<li>完整性或完备性 较复杂的功能可以通过伪指令实现</li>
<li>兼容性 高档机的指令系统应兼容以前低端机的指令系统，给软件资源重复利用带来方便</li>
<li>均匀性 运算系统应能应对多种类型的数据进行处理</li>
<li>可扩充性 操作码预留编码空间</li>
</ul>
<h3 id="基本设计问题">基本设计问题</h3>
<ol>
<li>操作码的个数、种类、复杂度如何选择？</li>
<li>运算指令能对哪几种数据类型进行操作？</li>
<li>采用什么样的指令格式？</li>
</ol>
<ul>
<li>规整型 定长指令字定长操作码，减少时间开销，增加空间开销</li>
<li>紧凑型</li>
</ul>
<ol start="4">
<li>通用寄存器的个数、功能、长度如何规定？</li>
</ol>
<p>增加通用寄存器个数可以减少指令执行访存次数，但会增加寄存器存取延迟，增大CPU成本</p>
<ol start="5">
<li>如何设计寻址方式的种类和编码已经各种寻址方式下有效地址如何计算？</li>
<li>下一条指令的地址如何确定？</li>
</ol>
<p>一般通过一个专门的寄存器，叫做 <strong>程序计数器（PC）</strong> 或 <strong>指令指针（IP）</strong></p>
<h3 id="操作数类型">操作数类型</h3>
<ol>
<li>指针或地址</li>
<li>数值数据 带符号整数、浮点数</li>
<li>位、位串、字符、字符串</li>
<li>布尔</li>
</ol>
<h3 id="寻址方式">寻址方式</h3>
<ol>
<li>立即寻址 指令中直接给出操作数本身</li>
<li>直接寻址 指令中给出操作数的地址</li>
<li>间接寻址 指令中给出操作数的地址的地址……</li>
<li>寄存器寻址 指令中给出寄存器的编号</li>
<li>寄存器间接寻址 寄存器中存的是操作数的地址</li>
<li>变址寻址 指令中给出基准地址，变址寄存器给出偏移量，相加得到实际地址</li>
<li>相对寻址 指令中给出偏移量，基准地址由PC给出</li>
<li>基址寻址 指令中给出偏移量，基准地址由基址寄存器给出</li>
<li>其他寻址方式</li>
</ol>
<blockquote>
<p><strong>基址寻址、变址寻址、相对寻址</strong>统称为 <strong>偏移寻址</strong> 。</p>
</blockquote>
<h3 id="操作数类型-1">操作数类型</h3>
<h3 id="操作码编码">操作码编码</h3>
<h3 id="标志信息的生成和使用">标志信息的生成和使用</h3>
<h3 id="指令系统设计风格">指令系统设计风格</h3>
<h4 id="按操作数位置指定风格来分">按操作数位置指定风格来分</h4>
<h4 id="按指令格式的复杂度来分">按指令格式的复杂度来分</h4>
<ol>
<li>CISC指令系统</li>
</ol>
<ul>
<li>指令系统复杂</li>
<li>指令周期长</li>
<li>指令周期差距大</li>
<li>采用微程序控制</li>
<li>难以进行编译优化</li>
</ul>
<ol start="2">
<li>RISC指令系统</li>
</ol>
<ul>
<li>指令数目少</li>
<li>指令格式规整</li>
<li>采用<code>Load/Store</code>型指令设计风格</li>
<li>采用流水线方式执行指令</li>
<li>采用大量寄存器</li>
<li>采用硬连线控制器</li>
<li>采用优化的编译系统</li>
</ul>
<h2 id="指令系统实例">指令系统实例</h2>
<h2 id="程序的机器级表示">程序的机器级表示</h2>
<h1 id="中央处理器">中央处理器</h1>
<h2 id="cpu概述">CPU概述</h2>
<h3 id="指令执行过程">指令执行过程</h3>
<ol>
<li>取指令并计算下一条指令地址</li>
<li>对指令操作码译码</li>
<li>计算源操作数地址并取源操作数</li>
<li>数据操作</li>
<li>目的操作数地址计算并存结果</li>
</ol>
<h3 id="cpu的基本功能和基本组成">CPU的基本功能和基本组成</h3>
<ol>
<li>程序计数器PC 用来存指令的地址</li>
<li>指令寄存器IR 用于存现行指令‘</li>
<li>指令译码器</li>
<li>脉冲源及启停控制线路</li>
<li>时序信号产生部件</li>
<li>操作控制信号形成部件</li>
<li>总线控制逻辑</li>
<li>中断机构</li>
</ol>
<h3 id="数据通路的基本结构">数据通路的基本结构</h3>
<h2 id="单周期处理器设计">单周期处理器设计</h2>
<h3 id="指令功能的描述">指令功能的描述</h3>
<h3 id="数据通路的设计">数据通路的设计</h3>
<h3 id="控制逻辑单元的设计">控制逻辑单元的设计</h3>
<h3 id="时钟周期的确定">时钟周期的确定</h3>
<h2 id="多周期处理器的设计">多周期处理器的设计</h2>
<h2 id="微程序控制器设计">微程序控制器设计</h2>
<p>硬连线控制器速度快，适合简单或规整的指令系统。对于复杂指令系统或其中的复杂指令，大多采用微程序方式设计控制器。</p>
<h3 id="微程序控制器的结构">微程序控制器的结构</h3>
<h2 id="异常和中断处理">异常和中断处理</h2>
<h3 id="基本概念">基本概念</h3>
<p>在程序正常执行过程中，CPU会遇到一些特殊情况而无法继续执行。</p>
<ul>
<li>内部异常 处理器内部异常引起的意外事件</li>
<li>外部中断 外设完成任务或完成某些特殊事件，发中断事件，等待处理。</li>
</ul>
<h1 id="指令流水线">指令流水线</h1>
<h2 id="流水线概述">流水线概述</h2>
<h3 id="流水线的执行效率">流水线的执行效率</h3>
<h3 id="适合流水线的指令集特征">适合流水线的指令集特征</h3>
<ul>
<li>指令长度尽量一致</li>
<li>指令格式尽量规整，尽量保持源寄存器的位置相同</li>
<li>采用<code>Load/Store</code>型指令风格</li>
<li>数据和指令在存储器中“对齐”存放</li>
</ul>
<h2 id="流水线处理器的实现">流水线处理器的实现</h2>
<h3 id="每条指令的流水段的分析">每条指令的流水段的分析</h3>
<h3 id="流水线数据通路的设计">流水线数据通路的设计</h3>
<h3 id="流水线控制器的设计">流水线控制器的设计</h3>
<h2 id="流水线冒险及处理">流水线冒险及处理</h2>
<h3 id="结构冒险">结构冒险</h3>
<p>也称硬件资源冲突，同一部件被不同指令同时使用。</p>
<h3 id="数据冒险">数据冒险</h3>
<p>后一指令要用到前面指令的结果，而结果还没产生。</p>
<ul>
<li>插入空操作</li>
<li>插入气泡 阻塞</li>
<li>使用转发技术 将中间数据之间转发到ALU的输入端</li>
</ul>
<h3 id="控制冒险">控制冒险</h3>
<h2 id="高级流水线技术">高级流水线技术</h2>
<ol>
<li>超流水线技术
增加流水线级数使更多的指令同时在流水线中重叠执行。</li>
</ol>
<blockquote>
<p>流水线的级数越多，用于流水段寄存器的开销越大，因而流水线级数是有限制的，不可能无限增加。</p>
</blockquote>
<ol start="2">
<li>多发射流水线技术
同时启动多条指令独立运行提高指令并行性。</li>
</ol>
<ul>
<li>指令打包 将并行处理的多条指令同时发送到发射槽 推测技术</li>
<li>冒险处理</li>
</ul>
<h1 id="存储器分层体系结构">存储器分层体系结构</h1>
<h2 id="存储器概述">存储器概述</h2>
<h3 id="存储器的分类">存储器的分类</h3>
<ol>
<li>按存储原件分类</li>
</ol>
<ul>
<li>半导体存储器</li>
<li>磁表面存储器</li>
<li>光盘存储器</li>
</ul>
<ol start="2">
<li>按存取方式分类</li>
</ol>
<ul>
<li>随机存取存储器 按地址访问存储单元</li>
<li>顺序存取存储器 信息按顺序存入和读出 存储容量大，存取速度慢</li>
<li>直接存取存储器 兼有随机访问和顺序存储的特点 磁盘</li>
<li>相联存储器</li>
</ul>
<ol start="3">
<li>按信息的可更改性分类</li>
</ol>
<ul>
<li>读写存储器</li>
<li>只读存储器</li>
</ul>
<ol start="4">
<li>按断电后信息的可保存程度分类</li>
</ol>
<ul>
<li>非易失性存储器</li>
<li>易失性存储器</li>
</ul>
<ol start="5">
<li>按功能分类</li>
</ol>
<ul>
<li>高速缓冲存储器 静态RAM芯片</li>
<li>主存储器 <strong>核心存储器</strong> MOS管半导体存储器</li>
<li>辅助存储器 磁盘存储器</li>
<li>海量后备存储器 容量大 速度慢</li>
</ul>
<blockquote>
<p>辅存和海量后备存储器统称为 <em>外部存储器</em> ，简称 <em>外存</em> 。</p>
</blockquote>
<h3 id="主存储器的组成和基本操作">主存储器的组成和基本操作</h3>
<h3 id="存储器的主要性能指标">存储器的主要性能指标</h3>
<ul>
<li>容量</li>
<li>价格</li>
<li>速度</li>
</ul>
<p>访问时间用读出时间T_A和写入时间T_W来描述</p>
<ul>
<li>接到命令开始到信息被送到数据线上的时间</li>
<li>接到命令到信息写入存储器的时间</li>
</ul>
<p>存储周期（T_M）：一次读写操作需要的全部时间，存储器进行连续读写操作的最短时间间隔。</p>
<h3 id="存储器的层次化结构">存储器的层次化结构</h3>
<table>
<thead>
<tr><th>典型存取时间</th><th>存储器</th><th>典型容量</th></tr>
</thead>
<tbody>
<tr><td>1ns</td><td>寄存器</td><td>&lt;1KB</td></tr>
<tr><td>2ns</td><td>高速缓存（cache）</td><td>4MB</td></tr>
<tr><td>10ns</td><td>主存储器（RAM和ROM）</td><td>500MB~4GB</td></tr>
<tr><td>10ms</td><td>辅助存储器（硬盘）</td><td>40~500G</td></tr>
<tr><td>10s</td><td>海量后备存储器（磁带库、光盘等）</td><td>10~100TB</td></tr>
</tbody>
</table>
<h2 id="半导体随机存取存储器">半导体随机存取存储器</h2>
<h3 id="基本存储原件">基本存储原件</h3>
<p>用来存储一位二进制信息，是组成存储器的最基本电路。</p>
<ol>
<li>六管静态MOS管存储元件</li>
<li>单管动态MOS管存储元件 降低了功耗</li>
<li>静态存储元件和动态存储元件的比较</li>
</ol>
<ul>
<li>SRAM存储元件所用MOS管多，占硅片面积大，功耗大，集成度低</li>
<li>DRAM存储元件MOS管少，占硅片面积小，功耗小，集成度更高，但因电容存储电荷，有漏电现象，必须定时刷新。</li>
</ul>
<h3 id="sram芯片和dram芯片">SRAM芯片和DRAM芯片</h3>
<ol>
<li>存储器芯片的内部结构</li>
</ol>
<ul>
<li>存储体</li>
<li>地址译码器</li>
<li>驱动器</li>
<li>I/O控制电路 放大信息的作用</li>
<li>片选控制信号</li>
<li>读写控制信号</li>
</ul>
<ol start="2">
<li>DRAM芯片的刷新</li>
</ol>
<ul>
<li>集中刷新 时间较长，影响系统的执行效率</li>
<li>分散刷新 不存在死时间区，但每个存储时间周期被加成</li>
<li>异步刷新</li>
</ul>
<ol start="3">
<li>DRAM芯片读写周期</li>
</ol>
<h3 id="sdram芯片技术">SDRAM芯片技术</h3>
<ol>
<li><code>SDRAM</code>芯片技术
每一步操作都在CLK的控制下，支持 <strong>突发</strong> 传输方式。</li>
<li><code>DDR SDRAM</code>芯片技术</li>
<li><code>DDR2 SDRAM</code>芯片技术</li>
<li><code>DDR3 SDRAM</code>芯片技术</li>
</ol>
<h2 id="存储器芯片的扩展及其与cpu的连接">存储器芯片的扩展及其与CPU的连接</h2>
<h3 id="内存条和内存条插槽">内存条和内存条插槽</h3>
<h3 id="存储器芯片的扩展">存储器芯片的扩展</h3>
<ol>
<li>位扩展</li>
<li>字扩展 容量扩充，位数不变</li>
<li>字、位同时扩展</li>
</ol>
<h2 id="半导体只读存储器和flash存储器">半导体只读存储器和Flash存储器</h2>
<h3 id="半导体只读存储器">半导体只读存储器</h3>
<ol>
<li>掩膜只读存储器</li>
</ol>
<ul>
<li>双极型</li>
<li>MOS型</li>
</ul>
<p>内容固定，可靠性高，但灵活性差，生产周期长，用户和厂家依赖性大，只适合定型批量生产</p>
<ol start="2">
<li>可编程只读存储器</li>
</ol>
<ul>
<li>熔丝型</li>
<li>反向二极管型</li>
</ul>
<p>写入不可逆</p>
<ol start="3">
<li>可擦除可编程只读存储器</li>
<li>电擦除电改写只读存储器</li>
</ol>
<h3 id="半导体flash存储器">半导体Flash存储器</h3>
<p>闪存，高密度非易失型读写存储器。功耗低，集成度高，不需要后备电源。</p>
<ol>
<li>Flash存储元</li>
<li>Flash存储器的基本操作</li>
</ol>
<ul>
<li>编程</li>
<li>擦除</li>
<li>读取</li>
</ul>
<h2 id="并行存储器结构技术">并行存储器结构技术</h2>
<h3 id="双口存储器">双口存储器</h3>
<p>两组独立的读写控制电路和两个独立的读写端口。</p>
<h3 id="多模块存储器">多模块存储器</h3>
<ol>
<li>连续编址方式</li>
<li>交叉编址方式</li>
</ol>
<h2 id="高速缓冲存储器">高速缓冲存储器</h2>
<h3 id="程序访问的局限性">程序访问的局限性</h3>
<p>较短时间间隔内，程序产生的地址往往集中在存储器的很小的一个范围。</p>
<ul>
<li>时间局限性 被访问的某存储单元在较短时间内可能又被访问</li>
<li>空间局限性 被访问的某个存储单元在一个较短的时间间隔内很可能也被访问</li>
</ul>
<h3 id="cache的基本工作原理">cache的基本工作原理</h3>
<h3 id="cache行和主内存块之间的映射关系">cache行和主内存块之间的映射关系</h3>
<ol>
<li>直接映射</li>
<li>全相联映射</li>
<li>组相联映射</li>
</ol>
<h3 id="cache中主存块的替换算法">cache中主存块的替换算法</h3>
<h3 id="cache的一致性问题">cache的一致性问题</h3>
<ol>
<li>全写法</li>
<li>回写法</li>
</ol>
<h2 id="虚拟存储器">虚拟存储器</h2>
<h3 id="虚拟地址空间">虚拟地址空间</h3>
<ol>
<li>简化存储</li>
<li>使主存空间有效利用</li>
<li>保护各自进程不被其他进程破坏</li>
</ol>
<h3 id="虚拟存储器的实现">虚拟存储器的实现</h3>
<h1 id="互联及输入输出组织">互联及输入输出组织</h1>
<h2 id="外部设备的分类和特点">外部设备的分类和特点</h2>
<h3 id="外设的分类">外设的分类</h3>
<p><strong>按信息的传输方向分类</strong></p>
<ul>
<li>输入设备</li>
<li>输出设备</li>
<li>输入输出设备</li>
</ul>
<p><strong>按功能分类</strong></p>
<ul>
<li>人机交互设备</li>
<li>存储设备</li>
<li>机-机通信设备</li>
</ul>
<h3 id="外设的特点">外设的特点</h3>
<ul>
<li>异步性</li>
<li>实时性</li>
<li>多样性</li>
</ul>
<h2 id="输入设备和输出设备">输入设备和输出设备</h2>
<h2 id="外部存储设备">外部存储设备</h2>
<h3 id="磁表面存储器的原理">磁表面存储器的原理</h3>
<h3 id="硬盘存储器">硬盘存储器</h3>
<h3 id="冗余磁盘阵列">冗余磁盘阵列</h3>
<h3 id="u盘和固态硬盘">U盘和固态硬盘</h3>
<h2 id="外设与cpu主存的互联">外设与CPU、主存的互联</h2>
<h3 id="总线概述">总线概述</h3>
<p>计算机内数据传输的公共路径，用于实现两个或两个以上部件之间的信息交换。</p>
<p>通常由一组数据线、一组控制线和一组地址线组成。有些总线没有单独的地址线，地址信息通过数据线来传送，这种行为称为数据线和地址线复用。</p>
<ol>
<li>总线宽度 总线中数据线的条数</li>
<li>总线工作频率</li>
<li>总线带宽 单位时间最多可传递的数据量
$B=W*F/N$</li>
</ol>
<ul>
<li>W 总线宽度</li>
<li>F 总线的时钟频率</li>
<li>N 完成一次数据传送所用的时钟周期数</li>
</ul>
<ol start="4">
<li>总线的寻址能力 地址线位数所确定的可寻址空间的大小</li>
<li>总线定时方式</li>
</ol>
<ul>
<li>同步</li>
<li>异步</li>
<li>半同步</li>
</ul>
<ol start="6">
<li>总线传送方式</li>
</ol>
<ul>
<li>非突发 先传地址，再传数据</li>
<li>突发 先给出首地址，连续传送数据块</li>
</ul>
<p>在总线宽度和总线时钟频率相同的情况下，突发方式数据传输更快。</p>
<ol start="7">
<li>总线负载能力 总线的负载一般指总线上扩展槽的个数</li>
</ol>
<h3 id="基于总线的互连结构">基于总线的互连结构</h3>
<h2 id="io接口">I/O接口</h2>
<p>解决外设与主机之间同步与协调、工作速度的匹配和数据格式的转换等问题。</p>
<h3 id="io接口的功能">I/O接口的功能</h3>
<ol>
<li>数据缓冲</li>
<li>错误或状态检测</li>
<li>控制和定时</li>
<li>数据格式转换</li>
</ol>
<h3 id="io接口的通用结构">I/O接口的通用结构</h3>
<h3 id="io端口及其编址">I/O端口及其编址</h3>
<h2 id="io数据传送控制方式">I/O数据传送控制方式</h2>
<h3 id="程序直接控制io方式">程序直接控制I/O方式</h3>
<ol>
<li>无条件传送方式 适用于简单外设</li>
<li>条件传送方式 适用于自身能独立启动I/O的设备</li>
</ol>
<ul>
<li>定时查询</li>
<li>独占查询</li>
</ul>
<h3 id="程序中新io方式">程序中新I/O方式</h3>
<ol>
<li>中断的概念</li>
<li>中断系统的基本职能和结构</li>
</ol>
<ul>
<li>及时记录各种中断请求信号</li>
<li>自动响应中断请求</li>
<li>自动判优</li>
<li>保护被中断程序的断点和现场</li>
<li>中断屏蔽</li>
</ul>
<ol start="3">
<li>中断过程</li>
</ol>
<h2 id="io子系统概述">I/O子系统概述</h2>
<h2 id="内核空间io软件">内核空间I/O软件</h2>
<h3 id="与设备无关的io软件">与设备无关的I/O软件</h3>
<ol>
<li>设备驱动程序统一接口</li>
<li>缓冲区处理</li>
<li>错误报告</li>
<li>打开和关闭文件</li>
<li>逻辑块大小处理</li>
</ol>
<h3 id="设备驱动程序">设备驱动程序</h3>
<h3 id="中断服务程序">中断服务程序</h3>
<h1 id="并行处理系统">并行处理系统</h1>
<p>通过采用多个功能部件或多个处理器核或多个CPU或多台计算机的互连，使得一个系统中可以同时进行多条指令或多个线程或多个任务的处理，从而实现计算速度和计算能力的大幅提升。</p>
<h2 id="并行处理系统概述">并行处理系统概述</h2>
<h3 id="并行处理的主要技术性问题">并行处理的主要技术性问题</h3>
<ol>
<li>互连</li>
<li>数据一致性</li>
<li>同步控制</li>
<li>任务划分</li>
<li>并行程序设计</li>
<li>资源调度和管理</li>
<li>容错性和安全性</li>
<li>性能分析与评估</li>
</ol>
<h3 id="并行处理系统的分类">并行处理系统的分类</h3>
<ol>
<li>Flynn分类</li>
</ol>
<ul>
<li>单指令流单数据流结构</li>
<li>单指令流多数据流结构</li>
<li>多指令流单数据流结构</li>
<li>多指令流多数据流结构</li>
</ul>
<ol start="2">
<li>按地址空间的访问方式分类</li>
</ol>
<ul>
<li>多计算机系统 具有多个私有地址空间的并行处理系统</li>
<li>多处理器系统 共享的单一地址空间的并行处理器系统</li>
</ul>
<ol start="3">
<li>按存储访问时间是否一致划分</li>
</ol>
<ul>
<li>一致性内存访问结构</li>
<li>非一致性内存访问结构</li>
</ul>
<ol start="4">
<li>按处理器单元的位置及其互连方式划分</li>
</ol>
<ul>
<li>多核芯片 一个CPU芯片中包含多个处理单元，每个处理单元称为一个 <strong>核</strong>，所有核可能共享一个LLC，并共享主存储器</li>
<li>众核芯片 一个面向三维图形、视频和可视化处理的GPU芯片中，包含多达几百个的简单核</li>
<li>对称多处理器 多个相同类型的GPU通过总线互连，并以相同地位共享系统的所有资源</li>
<li>大规模并行处理机 以专用内联网络连接数量众多的处理单元而构成的一种并行计算系统</li>
<li>集群 通过高性能网卡将若干个普通PC或SMP服务器或工作站连接而成的并行处理系统</li>
<li>网格 用因特网等广域网连接起来的远距离分布的一组异构计算机系统构成的分布式并行处理系统</li>
</ul>
<h2 id="多处理器系统">多处理器系统</h2>
<h3 id="uma多处理器系统">UMA多处理器系统</h3>
<p>每个处理器对存储单元的访问时间是一致的</p>
<h3 id="numa多处理器系统">NUMA多处理器系统</h3>
<h3 id="多处理器系统中的互连网络">多处理器系统中的互连网络</h3>
<h3 id="片级多处理器和多线程技术">片级多处理器和多线程技术</h3>
<h2 id="多计算机系统">多计算机系统</h2>
<h3 id="集群多计算机系统">集群多计算机系统</h3>
<h2 id="向量处理机和simd技术">向量处理机和SIMD技术</h2>
<h3 id="向量处理机">向量处理机</h3>
<h3 id="intel中的simd技术">Intel中的SIMD技术</h3>
<h3 id="gpu架构">GPU架构</h3>
<h2 id="并行处理编程模式简介">并行处理编程模式简介</h2>
<ol>
<li>共享存储变量方式</li>
<li>消息传递方式</li>
<li>MapReduce并行程序设计方式</li>
<li>CUDA并行程序设计方式</li>
</ol>
</div>
            </div>
            <script src="https://utteranc.es/client.js" repo="zerofancy/zerofancy.github.io" issue-term="计算机组成原理笔记"
                theme="github-light" crossorigin="anonymous" async>
                </script>
        </div>
        <!-- 页脚 -->
        <footer class="navbar navbar-light bg-light">
            <p>版权所有：归零幻想 ┊ 备案号：<a href="http://beian.miit.gov.cn/">暂无</a>┊ Powered by：归零幻想</p>
        </footer>
    </div>
</body>

</html>