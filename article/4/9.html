<!doctype html>
<html lang="zh-CN">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/idea.min.css"
        integrity="sha512-Rfc5zQIp95eozfMCdS3B4MItUxU8orNje/t1OEhf7XwIk0DTCuMH2LG0NIgP8UGYK9L39WfUNI1c4IsM5yY/PA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>android项目开发：Activity-归零幻想</title>

    <style>
        body {
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
    </style>
</head>

<body>
    <nav class="container navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="/favicon.ico" alt="归零幻想" width="20px" height="20px">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/tag.html">标签</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about">关于</a>
                    </li>
                    <!--
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Dropdown
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                    </li>
                -->
                </ul>
                <!--
                <form class="d-flex">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
                -->
            </div>
        </div>
    </nav>

    <div class="container mt-3">
        <div class="row">
            <div class="card col" id="content-container">
                <div class="card-body"><p>title: android项目开发：Activity
author: 归零幻想
publishDate: 2020-12-15
editDate: 2020-12-15
tags: [android, 第一行代码, Kotlin, Activity]</p>
<!--config-->
<blockquote>
<p>仍然是《第一行代码》的读书笔记，可能引用原书的定义和描述，或代码案例。</p>
</blockquote>
<h1 id="activity">Activity</h1>
<h2 id="activity基本用法">Activity基本用法</h2>
<p>Android讲究设计逻辑与视图分离，一般Activity都会对应一个布局文件（XML文件）。</p>
<p>所有的Activity都要在AndroidManifest中注册才生效。</p>
<p>Activity可以创建菜单。首先在<code>res/menu</code>下创建一个xml文件（Android Studio中也提供了可视化编辑的方法）：</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;menu xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
      xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;

    &lt;item
            android:id=&quot;@+id/add_item&quot;
            android:title=&quot;Add&quot;/&gt;
    &lt;item
            android:id=&quot;@+id/remove_item&quot;
            android:title=&quot;Remove&quot;/&gt;
&lt;/menu&gt;
</code></pre>
<p>重写两个方法</p>
<pre><code class="language-kotlin">    override fun onCreateOptionsMenu(menu: Menu?): Boolean {
    menuInflater.inflate(R.menu.main, menu)
    return true
}

override fun onOptionsItemSelected(item: MenuItem): Boolean {
    when (item.itemId) {
        R.id.add_item -&gt; Toast.makeText(this, &quot;Add a book.&quot;, Toast.LENGTH_LONG).show()
        R.id.remove_item -&gt; Toast.makeText(this, &quot;Remove a book.&quot;, Toast.LENGTH_LONG).show()
    }
    return true
}
</code></pre>
<p><img src="https://i.loli.net/2020/12/10/a6wOcTFrHLhS4il.jpg" alt="photo_2020-12-10_21-00-32.jpg" /></p>
<p>用<code>finish()</code>方法可以关闭一个Activity。</p>
<!--summary-->
<h2 id="在activity之间跳转">在Activity之间跳转</h2>
<h3 id="显式intent">显式Intent</h3>
<pre><code class="language-kotlin">jumpButton.setOnClickListener {
    startActivity(Intent(this, SecondActivity::class.java))
}
</code></pre>
<h3 id="隐式intent">隐式Intent</h3>
<p>首先在<code>AndroidManifest.xml</code>中注册</p>
<pre><code class="language-xml">
&lt;activity android:name=&quot;.SecondActivity&quot;&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;com.example.myapplication.ACTION_START&quot;/&gt;
        &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;
</code></pre>
<p>修改启动Activity的代码：</p>
<pre><code class="language-kotlin">startActivity(Intent(&quot;com.example.myapplication.ACTION_START&quot;))
</code></pre>
<p>action是动作，category是一些附加信息。只有action和category完全匹配才能正确启动Activity。</p>
<p>接下来我们修改上述代码验证这一点。</p>
<pre><code class="language-xml">
&lt;activity android:name=&quot;.SecondActivity&quot;&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;com.example.myapplication.ACTION_START&quot;/&gt;
        &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;
        &lt;category android:name=&quot;com.example.myapplication.MY_CATEGORY&quot;/&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;
</code></pre>
<pre><code class="language-kotlin">val myIntent = Intent(&quot;com.example.myapplication.ACTION_START&quot;)
myIntent.addCategory(&quot;com.example.myapplication.MY_CATEGORY&quot;)
startActivity(myIntent)
</code></pre>
<h4 id="启动系统其他activity">启动系统其他Activity</h4>
<p>可以通过这样的代码启动系统浏览器：</p>
<pre><code class="language-kotlin">val intent = Intent(Intent.ACTION_VIEW)
intent.data = Uri.parse(&quot;https://ntutn.top&quot;)
startActivity(intent)
</code></pre>
<p><code>Intent.ACTION_VIEW</code>实际上是<code>android.intent.action.VIEW</code>，如果我们注册下这个action也能冒充系统浏览器。</p>
<pre><code class="language-xml">
&lt;intent-filter&gt;
    &lt;action android:name=&quot;android.intent.action.VIEW&quot;/&gt;
    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;
    &lt;data android:scheme=&quot;https&quot;/&gt;
&lt;/intent-filter&gt;
</code></pre>
<p><img src="https://i.loli.net/2020/12/10/K7pyaXDeSVzqc8Y.jpg" alt="photo_2020-12-10_23-21-57.jpg" /></p>
<h3 id="向下一个activity传递数据">向下一个Activity传递数据</h3>
<p>通过Intent的putExtra方法。在第一个Activity中：</p>
<pre><code class="language-kotlin">            intent.putExtra(&quot;extra_data&quot;, &quot;I'm IF. IF 3279. &quot;)
</code></pre>
<p>在第二个Activity中：</p>
<pre><code class="language-kotlin">        Toast.makeText(this, intent.getStringExtra(&quot;extra_data&quot;), Toast.LENGTH_LONG).show()
</code></pre>
<h3 id="返回数据给上一个activity">返回数据给上一个Activity</h3>
<p>首先看看书上的方法。 第一个Activity中：</p>
<pre><code class="language-kotlin">val intent = Intent(this, SecondActivity::class.java)
startActivityForResult(intent, REQ_1)
</code></pre>
<p>然后重写一个方法接收结果</p>
<pre><code class="language-kotlin">override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
    super.onActivityResult(requestCode, resultCode, data)
    when (requestCode) {
        REQ_1 -&gt; if (resultCode == RESULT_OK) {
            Toast.makeText(this, &quot;点击按钮返回数据：${data?.getStringExtra(&quot;data_return&quot;)}。&quot;, Toast.LENGTH_LONG).show()
        }
    }
}
</code></pre>
<p>用这样的方法在第二个Activity中返回数据</p>
<pre><code class="language-kotlin">
intent.putExtra(&quot;data_return&quot;, &quot;Hello FirstActivity&quot;)
setResult(RESULT_OK, intent)
finish()
</code></pre>
<p>不过不得不说安卓迭代是真的快啊，现在AS已经提示我这种方法过时了。于是去找找现在最新的技术是啥。</p>
<pre><code class="language-kotlin">
private val testActivityResult =
    registerForActivityResult(ActivityResultContracts.StartActivityForResult()) {
        if (it.resultCode == Activity.RESULT_OK) {
            Toast.makeText(
                this,
                &quot;点击按钮返回数据：${it.data?.getStringExtra(&quot;data_return&quot;)}。&quot;,
                Toast.LENGTH_LONG
            ).show()
        }
    }


//在需要启动另一个Activity的地方
testActivityResult.launch(intent)
</code></pre>
<h2 id="activity的生命周期">Activity的生命周期</h2>
<h3 id="返回栈">返回栈</h3>
<p>Activity可以层叠，每当启动一个Activity它将入栈，位于返回栈的栈顶。而如果销毁Activity，它将出栈，下一个栈顶的Activity则被显示给用户。</p>
<h3 id="activity的状态">Activity的状态</h3>
<table>
<thead>
<tr><th>状态</th><th>说明</th><th>回收策略</th></tr>
</thead>
<tbody>
<tr><td>运行状态</td><td>Activity处于返回栈的栈顶</td><td>最不倾向于被回收</td></tr>
<tr><td>暂停状态</td><td>不处于栈顶，但仍然可见<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup></td><td>只有在内存极低的情况下才会回收</td></tr>
<tr><td>停止状态</td><td>不处于栈顶，且完全不可见</td><td>可能被回收</td></tr>
<tr><td>销毁状态</td><td>从返回栈移除后</td><td>最倾向于被回收</td></tr>
</tbody>
</table>
<h3 id="activity的生存期">Activity的生存期</h3>
<p><img src="https://i.loli.net/2020/12/14/dNqfoY4XOaFC2Es.jpg" alt="lifecycle.jpg" /></p>
<table>
<thead>
<tr><th>方法</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td><code>onCreate()</code></td><td>Activity<strong>第一次</strong>被创建。应完成初始化操作，创建布局，绑定事件</td></tr>
<tr><td><code>onStart()</code></td><td>Activity由不可见变为可见。</td></tr>
<tr><td><code>onResume()</code></td><td>Activity准备好和用户交互。此时Activity处于<strong>运行状态</strong></td></tr>
<tr><td><code>onPause()</code></td><td>系统准备启动或恢复另一个Activity时。应释放资源，保存关键数据。</td></tr>
<tr><td><code>onStop()</code></td><td>Activity完全不可用时调用。</td></tr>
<tr><td><code>onDestory()</code></td><td>Activity被销毁前被调用。</td></tr>
<tr><td><code>onRestart()</code></td><td>停止状态变为运行状态前被调用。</td></tr>
</tbody>
</table>
<ul>
<li>完整生存期 <code>onCreate()</code>——<code>onDestory()</code></li>
<li>可见生存期 <code>onStart()</code>——<code>onStop()</code></li>
<li>前台生存期 <code>onResume()</code>——<code>onPause()</code></li>
</ul>
<h2 id="activity的启动模式">Activity的启动模式</h2>
<p>在<code>AndroidManifest.xml</code>中指定activity标签的<code>android:launchMode</code>属性。</p>
<h3 id="standard">standard</h3>
<p>默认模式。总是创建一个新实例。</p>
<h3 id="singletop">singleTop</h3>
<p>若目标Activity已经在栈顶，则直接启动。</p>
<h3 id="singletask">singleTask</h3>
<p>若目标Activity已经在栈中，则将其上Activity出栈并启动。</p>
<h3 id="singleinstance">singleInstance</h3>
<p>启用一个新的返回栈管理Activity，一般用于多个程序共享Activity。</p>
<h2 id="activity最佳实践">Activity最佳实践</h2>
<h3 id="知道当前在哪个activity">知道当前在哪个Activity</h3>
<p>准备一个<code>BaseActivity</code>，让其他所有Activity继承自它。</p>
<pre><code class="language-kotlin">package top.ntutn.activcitylifecycletest

import android.os.Bundle
import android.util.Log
import androidx.appcompat.app.AppCompatActivity

open class BaseActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        Log.d(TAG, &quot;${javaClass.simpleName} onCreate.&quot;)
    }

    companion object {
        private const val TAG = &quot;BaseActivity&quot;
    }
}
</code></pre>
<h3 id="随时随地退出程序">随时随地退出程序</h3>
<p>可以准备一个类将当前所有Activity管理起来。</p>
<pre><code class="language-kotlin">package top.ntutn.activcitylifecycletest

import android.app.Activity

object ActivityHelper {
    private val activities = arrayListOf&lt;Activity&gt;()

    /**
     * onCreate时
     */
    fun addActivity(activity: Activity) {
        activities.add(activity)
    }

    /**
     * onDestory时
     */
    fun removeActivity(activity: Activity) {
        activities.remove(activity)
    }

    fun finishAll() {
        for (activity in activities) {
            if (!activity.isFinishing) {
                activity.finish()
            }
        }
    }
}
</code></pre>
<p>然后，在<code>BaseActivity</code>中将Activity注册到这里。</p>
<pre><code class="language-kotlin">
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    Log.d(TAG, &quot;${javaClass.simpleName} onCreate.&quot;)

    ActivityHelper.addActivity(this)
}

override fun onDestroy() {
    super.onDestroy()
    Log.d(TAG, &quot;${javaClass.simpleName} onDestory&quot;)

    ActivityHelper.removeActivity(this)
}

</code></pre>
<p>这样就可以随时使用<code>ActivityHelper.finishAll()</code>来关闭所有Activity了。</p>
<h3 id="启动activity的最佳写法">启动Activity的最佳写法</h3>
<blockquote>
<p>作为一个成熟的Activity，你应该会自己启动自己了。</p>
</blockquote>
<p>建议Activity自己实现一个启动Activity的方法，这样外部调用时就能一目了然看出这个Activity需要什么参数。</p>
<pre><code class="language-kotlin">
companion object {
    fun actionStart(context: Context, title: String?, content: String?) {
        val intent = Intent(context, DialogActivity::class.java)
        intent.putExtra(&quot;title&quot;, title)
        intent.putExtra(&quot;content&quot;, content)
        context.startActivity(intent)
    }
}
</code></pre>
<p>这样外部调用只需要</p>
<pre><code class="language-kotlin">
DialogActivity.actionStart(this, &quot;MyDialog&quot;, &quot;作为一个成熟的Activity，你应该会自己启动自己了。&quot;)
</code></pre>
<div class="footnotes">
<hr />
<ol>
<li id="fn-1">
<p>Activity不一定会占满整个屏幕，所以下方没有被激活但仍然可见。很多应用用一像素Activity保活就是利用了这一点。</p>
<a href="#fnref-1" class="footnote-backref">&#8617;</a>
</li>
</ol>
</div>
</div>
            </div>

            <div class="card col-md-4 d-none d-md-block ms-md-3 text-center">
                <div class="sticky-top">
                    <img src="/favicon.ico" alt="avatar" class="mt-3">
                    <div class="card-body">
                        <p class="card-text">
                            归零幻想
                        </p>
                        <p class="card-text">
                            邮件：<a href="mailto:admin@ntutn.top">admin@ntutn.top</a><br>
                            Telegram: <a href="https://t.me/zerofancy">@zerofancy</a>
                        </p>
                        <blockquote id="hitokoto">正在追番《艾克斯奥特曼》。</blockquote>
                        <div style="text-align:right;" id="hitokoto_from">——站长</div>
                        <a href="/atom.xml">RSS</a>
                    </div>
                    <div>
                        <p class="card-body">友情链接</p>
                        <ul>
                            <li><a href="https://blog.semesse.me/">色魔是色魔</a></li>
                            <li><a href="http://www.xyx6.top/">XYX</a></li>
                            <li><a href="http://upccaishu.top/">菜树</a></li>
                            <li><a href="https://www.ruiovo.top/">ruiOvO</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 一言
        let xhr = new XMLHttpRequest()
        xhr.open('get', 'https://v1.hitokoto.cn/')
        xhr.send()
        xhr.onload = function () {
            let hitokotoResult = JSON.parse(xhr.responseText)
            document.getElementById("hitokoto").innerText = hitokotoResult.hitokoto
            document.getElementById("hitokoto_from").innerText = "——" + hitokotoResult.from
        }
        // 页码
        var getRandomColor = function () {
            return '#' +
                (function (color) {
                    return (color += '0123456789abcdef'[Math.floor(Math.random() * 16)]) && (color.length == 6) ? color : arguments.callee(color);
                })('');
        }
        let pageWidth = window.innerWidth,
            pageHeight = window.innerHeight
        if (typeof innerWidth != 'number') {
            if (document.compatMode == 'CSS1Compat') {//严格模式
                pageWidth = document.documentElement.clientWidth
                pageHeight = document.documentElement.clientHeight
            } else {
                pageWidth = document.body.clientWidth
                pageHeight = document.body.clientHeight
            }
        }
        document.body.style.backgroundColor = getRandomColor();
        console.log(`https://source.unsplash.com/random/${pageWidth}x${pageHeight}`)
        document.body.style.backgroundImage = `url(https://source.unsplash.com/random/${pageWidth}x${pageHeight})`;
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/bash.min.js"
        integrity="sha512-HIFqAH4BgdlJE3A1Uoyl6weoDR1WtdufmKBPWtemvTI+12lrV5dfPR5ekvJaePkq6w+zuPAek2X2hHxo/T5kag=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/basic.min.js"
        integrity="sha512-8MrrYyqbmwVrcDGR/2VenE2+IX+ELHJxM0vysdjlAQrJyXZwfKl9dXdyWASFBKzuszu8z3G7XoyjeJVM3b9MlQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/c.min.js"
        integrity="sha512-+2nEdmDIEQVBw4y3LD2BLOgAvX1+xx9kPQawjQB/HNfi4bDgSF4ywg8yIQ67ijrLLO2ruHaX9dZ25ruG3HwZSg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/cpp.min.js"
        integrity="sha512-OsjySiIaNsR3uFe7uEH6yht3is/WrIXKocWeO0YHFs25jOwHwMtzIdkUENQjblQihTUIN78bpnLKbhMxRegjLw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/gradle.min.js"
        integrity="sha512-QXYGxsyYg6bKlr3W82K2fp25xklKskdnms2qEhgrm2Uz+dnDG3RCHmVP6GQ6waI34+lirlcgsdddvmSXbBhhhQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/groovy.min.js"
        integrity="sha512-wHPb/EJ15Z5bl59kfxL/THnrtIGdrlOD0CdeBKZ1tsgcLsmx4kbiTmB0gsPZUqCzgIB3MK9tBemnrIr41WFUkQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/java.min.js"
        integrity="sha512-5j3t2T2xf236N+J+QPE2Po6Q3P/SXze0hgt2XMi1mbYzkC2VqeB/DFYICXfMhV1V+KdxDOBp9PcCAebb8kLvSw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/javascript.min.js"
        integrity="sha512-Jvh5kXa0Zu4HoSxPaZIVhCWPkD7b7gnWHVzv6jiaJwAJ18a/U6BOXludYfJYwHorpy2WFH0Df6EcFi5udu1dWA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/json.min.js"
        integrity="sha512-z3sCqG8cfRJGXv+x7QvVAx92uACSYScuJCRQzSjEhAU23TabHD8+tqafvAbKterqaB4tkiVJYCFNhQaT1+QmfQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/kotlin.min.js"
        integrity="sha512-ZEBRAqmcLuQ5A9KdZIayen2HuDMAau0Q4C3s/gwnIldFSvOxAOXJk0zhEpu30ACABYAmHKNSZDmup5OEGbx+9g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/languages/xml.min.js"
        integrity="sha512-1UdiK7+k2GhyGJMG9hmQXQ51TP2NPjHjh65uWhCeqSXSZ4UlzDG5+/st9VWRksKWYxKeU37/qwSAuPfSkcWD6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        hljs.highlightAll()
    </script>

    <!--图片调整-->
    <script>
        //获取图片元素
        var imgs = document.getElementsByTagName("img");
        //获取div元素   
        var contentLeft = document.getElementById("content-container");
        //使用js设置图片元素宽度的变化    
        for (var i = 0; i < imgs.length; i++) {
            imgs[i].style["max-width"] = contentLeft.offsetWidth - 60 + "px";
        }
        //40是要减去padding
    </script>

    <!--HTTPS重定向-->
    <script>
        if (!(window.location.host.startsWith("127.0.0.1") || window.location.host.startsWith("localhost")) && (window.location.protocol != "https:")) {
            window.location.protocol = "https";
        }
    </script>
</body>

</html>