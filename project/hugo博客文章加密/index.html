<!doctype html>
<html>
 <head>
  <title>Hugo博客文章加密</title>
  <meta charset="utf-8">
  <meta name="X-UA-Compatible" content="IE=edge">
  <meta name="google-site-verification" content="">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta content="telephone=no" name="format-detection">
  <meta name="description" content="看了下朋友的博客是有文章加密功能的，于是找了下Hugo相关的办法。">
  <meta name="renderer" content="webkit">
  <meta name="theme-color" content="#ffffff">
  <meta property="og:title" content="Hugo博客文章加密">
  <meta property="og:description" content="看了下朋友的博客是有文章加密功能的，于是找了下Hugo相关的办法。">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://ntutn.top/project/hugo%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86/">
  <meta property="article:section" content="project">
  <meta property="article:published_time" content="2023-02-19T00:39:01+08:00">
  <meta property="article:modified_time" content="2023-02-19T00:39:01+08:00">
  <meta property="og:site_name" content="归零幻想">
  <link rel="icon" href="//images.ntutn.top/favicon.ico">
  <script src="/js/toc.js"></script>
  <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
  <link rel="stylesheet" href="/scss/journal.scss" integrity="" media="screen">
  <link rel="stylesheet" href="/scss/dark-mode.scss" integrity="" media="screen">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: 5a03d307f5214109a1e7c8b2cf306a3d">
</script>
  <style>
    pre code {
        color: black;
        -comment: "感谢评论区 https://github.com/lx200916 指出博客代码块深色模式问题";
    }
</style>
  <script src="https://unpkg.com/zoomtastic@2.2.1"></script>
  <script src="https://unpkg.com/kotlin-playground@1" data-selector="code.language-kotlin"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function(event) { 
        document.querySelectorAll("div.post-body-wrapper img").forEach(function(element){
            element.setAttribute("zoomtastic", true)
            element.style.maxWidth="60%"
        })
		
		Zoomtastic.mount({
			size: '95%',
			easing: 'ease',
			duration: 300,
			background: 'rgba(0, 0, 0, 0.9)',
			filter: 'drop-shadow(0 2px 16px rgba(0, 0, 0, 0.3))',
			animation: 'slide' 
		});
		
		Zoomtastic.listen('[zoomtastic]', 'src');
    });

	
	var _hmt = _hmt || [];
	(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?298c58938f9266e6098936c4f71a9a83";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
	})();

</script>
 </head>
 <body>
  <div id="app">
   <div id="sideContainer" class="side-container"><a class="a-block nav-head false" href="https://ntutn.top/">
     <div class="nav-title">
      归零幻想
     </div>
     <div class="nav-subtitle">
      零点还不算熬夜
     </div> </a>
    <div class="nav-link-list"><a class="a-block nav-link-item active" href="/project"> 项目 </a> <a class="a-block nav-link-item false" href="/tags"> 标签 </a> <a class="a-block nav-link-item false" href="/posts"> 归档 </a> <a class="a-block nav-link-item false" href="/friends"> 友链 </a> <a class="a-block nav-link-item false" href="/about"> 关于 </a> <a class="a-block nav-link-item false" href="/index.xml"> RSS </a>
    </div>
    <div class="nav-footer">
     Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a> <br> 移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br> <br> © CC BY-SA 4.0
    </div>
   </div>
   <div id="extraContainer" class="extra-container">
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">
    </div>
    <div class="pagination"><a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }"> <i class="material-icons pagination-action-icon"> keyboard_arrow_up </i> </a> <a type="button" class="pagination-action" id="darkModeToggleButton"> <span class="material-icons pagination-action-icon" id="darkModeToggleIcon"> dark_mode </span> </a>
    </div>
   </div>
   <div class="single-column-drawer-container" id="drawer" v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
     <div class="drawer-menu"><a class="a-block drawer-menu-item active" href="/project"> 项目 </a> <a class="a-block drawer-menu-item false" href="/tags"> 标签 </a> <a class="a-block drawer-menu-item false" href="/posts"> 归档 </a> <a class="a-block drawer-menu-item false" href="/friends"> 友链 </a> <a class="a-block drawer-menu-item false" href="/about"> 关于 </a> <a class="a-block drawer-menu-item false" href="/index.xml"> RSS </a>
      <div class="toc">
      </div>
     </div>
    </div>
   </div> <transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div> 
   </transition>
   <nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content"><button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer"> <i class="material-icons"> menu </i> </button> <a id="navTitle" class="navbar-brand" href="https://ntutn.top/"> 归零幻想 </a> <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2"> <i class="material-icons" id="darkModeToggleIcon2"> dark_mode </i> </button>
    </div>
   </nav>
   <div class="single-column-header-container" id="pageHead" v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href="https://ntutn.top/">
     <div class="single-column-header-title">
      归零幻想
     </div>
     <div class="single-column-header-subtitle">
      零点还不算熬夜
     </div> </a>
   </div>
   <div id="content">
    <div id="streamContainer" class="stream-container">
     <div class="post-list-container post-list-container-shadow">
      <div class="post">
       <div class="post-head-wrapper-text-only">
        <div class="post-title">
         Hugo博客文章加密 
         <div class="post-subtitle">
          看了下朋友的博客是有文章加密功能的，于是找了下Hugo相关的办法。
         </div>
         <div class="post-meta"><time itemprop="datePublished"> 2023-02-19 00:39 </time> <i class="material-icons" style="">folder</i> <a href="/categories/%E9%A1%B9%E7%9B%AE">项目</a> &nbsp; <i class="material-icons" style="">label</i> <a href="/tags/%E5%8D%9A%E5%AE%A2">博客</a> &nbsp; <a href="/tags/%E9%A1%B9%E7%9B%AE">项目</a> &nbsp; <a href="/tags/kotlin">Kotlin</a> &nbsp; <a href="/tags/%E5%BC%80%E6%BA%90">开源</a> &nbsp; <i class="material-icons" style="">schedule</i> 2 min 25 s.
         </div>
        </div>
       </div>
       <div class="post-body-wrapper">
        <div class="post-body" v-pre>
         <p>最近发现一个看上去不错的项目叫做<a href="https://github.com/Li4n0/hugo_encryptor">Hugo Encryptor</a>，可以给hugo博客加密，输入密码后又可以正常访问，相当nice。</p>
         <p>然而这个工具折腾起来并没有那么容易用，因为它Python写的，依赖问题就是一个坑，这坑过了之后还发现它有其他的缺陷，比如重复运行会报错等。首先我这样说不是因为我讨厌Python哈，虽然我确实不喜欢，但作者去年也说<a href="https://github.com/Li4n0/hugo_encryptor/issues/29">计划拿Go重新实现的</a>，但目前没啥动静。</p>
         <p>看它其实也就一个Python文件，遍历查找xml节点加密替换内容，属于是我这种教程都没看完的人也能看懂的程度，于是我决定自己写一个Kotlin版本。本来是想试试GraalVM整上各个平台的native版本，但折腾好久也没运行起来，于是退而求其次整了个类似安卓项目中<code>gradlew</code>文件的脚本叫<code>hugow</code>，替代<code>hugo</code>命令，一键完成下载安装工具、生成静态网站和对特定内容加密的功能。</p>
         <blockquote>
          <p>示例：下面这段内容的密码是<code>ntutn</code>。</p>
         </blockquote>
         <div class="hugo-encryptor-container">
          <div class="hugo-encryptor-prompt">
           <p>文章的部分内容被密码保护：</p>
          </div>
          <div class="hugo-encryptor-form"><input class="hugo-encryptor-input" placeholder="请输入密码"> <input class="hugo-encryptor-button" type="button" value="点击验证" onclick="_click_handler(this)">
          </div>
          <div class="hugo-encryptor-cipher-text" style="display: none;">
           YCDQZHDB54Vc8VWsXWYhLMfOp1vVBg904fi2mh/1tJUMR9R3POoXwyOVDjdN7giitvClu3ltalh5yWYBSRFqc62FaGyMIcwPa0cNsrj3GIvEggvnQkR+jhVmM5xfEVWUVqudQEyRy6qLBLPkGBMmfCsx4mZVkKF63UpkWqw1UhzoH7UZF7J3bQT28uW0ax5KJemDGzSgDPxH+a/Ik5uMe93dxnOjYTfEodpyM3KnWvFbCtJ+IEQBwWI0fTXftCe5RRjlDXYFBqndfkNNVgkLazqgqCUlthakgGyVnLUj4plVUegFzGdHKDdipw/bwRthF+bZwqgWk40zyNH+zbY0pw==
          </div>
         </div>
         <hr width="100%" id="EOF">
         <p style="color:#777;">最后修改于 2023-02-19</p>
        </div>
       </div>
       <nav class="post-pagination"><a class="newer-posts"> 下回<br>已经到头啦。 </a> <a class="older-posts" href="/think/%E8%BF%B7%E4%BF%A1%E8%A1%8C%E4%B8%BA/"> 上回<br>[加密]迷信行为 </a>
       </nav>
       <div class="post-comment-wrapper">
        <script src="https://utteranc.es/client.js" repo="zerofancy/zerofancy.github.io" issue-term="title" label="" theme="github-light" crossorigin="anonymous" async>
</script>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div id="single-column-footer">
    Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a> <br> 移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br> <br> © CC BY-SA 4.0
   </div>
  </div>
  <script src="/js/journal.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>
  <script src="/decrypt.js"></script>
 </body>
</html>