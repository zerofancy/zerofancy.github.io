<!DOCTYPE html>
<html><head>
<title>android项目开发：Kotlin</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="第一行代码的学习记录，这篇是Kotlin的语法熟悉。">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="android项目开发：Kotlin" />
<meta property="og:description" content="第一行代码的学习记录，这篇是Kotlin的语法熟悉。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ntutn.top/posts/kotlin/" />
<meta property="article:published_time" content="2021-10-12T03:11:37+08:00" />
<meta property="article:modified_time" content="2021-10-12T03:11:37+08:00" /><meta property="og:site_name" content="归零幻想" />










<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  




<link rel="icon" href="//images.ntutn.top/favicon.ico">



<link rel="stylesheet" href="https://ntutn.top/scss/journal.min.d8d9f81b896882733c41896750adbefbf9319ca02ccccefd461650898975c3af.css" integrity="sha256-2Nn4G4lognM8QYlnUK2&#43;&#43;/kxnKAszM79RhZQiYl1w68=" media="screen">



<link rel="stylesheet" href="https://ntutn.top/scss/dark-mode.min.60f86847da9fc0724177ccfd0bf7c5997b0b41f1e58d5a293cfb3723c497c422.css" integrity="sha256-YPhoR9qfwHJBd8z9C/fFmXsLQfHljVopPPs3I8SXxCI=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>



<script defer
	src='https://static.cloudflareinsights.com/beacon.min.js'
	data-cf-beacon='{"token": 5a03d307f5214109a1e7c8b2cf306a3d'>
</script>






  <script src="/js/toc.js"></script>














</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://ntutn.top/">
    
        <div class="nav-title">
            归零幻想
        </div>
        
        <div class="nav-subtitle">
            零点还不算熬夜
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	CC BY-SA 4.0
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#kotlin" onclick="onNavClick(`#kotlin-nav`)" id="kotlin-nav">
									Kotlin
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%8f%98%e9%87%8f%e5%92%8c%e5%87%bd%e6%95%b0" onclick="onNavClick(`#变量和函数-nav`)" id="变量和函数-nav">
									变量和函数
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%8f%98%e9%87%8f" onclick="onNavClick(`#变量-nav`)" id="变量-nav">
									变量
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%87%bd%e6%95%b0" onclick="onNavClick(`#函数-nav`)" id="函数-nav">
									函数
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%a8%8b%e5%ba%8f%e7%9a%84%e9%80%bb%e8%be%91%e6%8e%a7%e5%88%b6" onclick="onNavClick(`#程序的逻辑控制-nav`)" id="程序的逻辑控制-nav">
									程序的逻辑控制
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#if" onclick="onNavClick(`#if-nav`)" id="if-nav">
									if
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#when%e6%9d%a1%e4%bb%b6%e8%af%ad%e5%8f%a5" onclick="onNavClick(`#when条件语句-nav`)" id="when条件语句-nav">
									when条件语句
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%aa%e7%8e%af%e8%af%ad%e5%8f%a5" onclick="onNavClick(`#循环语句-nav`)" id="循环语句-nav">
									循环语句
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%e7%bc%96%e7%a8%8b" onclick="onNavClick(`#面向对象编程-nav`)" id="面向对象编程-nav">
									面向对象编程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%b1%bb%e4%b8%8e%e5%af%b9%e8%b1%a1" onclick="onNavClick(`#类与对象-nav`)" id="类与对象-nav">
									类与对象
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%bb%a7%e6%89%bf%e4%b8%8e%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" onclick="onNavClick(`#继承与构造函数-nav`)" id="继承与构造函数-nav">
									继承与构造函数
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8e%a5%e5%8f%a3" onclick="onNavClick(`#接口-nav`)" id="接口-nav">
									接口
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%95%b0%e6%8d%ae%e7%b1%bb%e4%b8%8e%e5%8d%95%e4%be%8b%e7%b1%bb" onclick="onNavClick(`#数据类与单例类-nav`)" id="数据类与单例类-nav">
									数据类与单例类
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#lambda%e7%bc%96%e7%a8%8b" onclick="onNavClick(`#lambda编程-nav`)" id="lambda编程-nav">
									Lambda编程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%87%bd%e6%95%b0%e5%bc%8fapi" onclick="onNavClick(`#函数式api-nav`)" id="函数式api-nav">
									函数式API
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#maxby" onclick="onNavClick(`#maxby-nav`)" id="maxby-nav">
									maxBy
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#map" onclick="onNavClick(`#map-nav`)" id="map-nav">
									map
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#filter" onclick="onNavClick(`#filter-nav`)" id="filter-nav">
									filter
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#any" onclick="onNavClick(`#any-nav`)" id="any-nav">
									any
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#all" onclick="onNavClick(`#all-nav`)" id="all-nav">
									all
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#java%e5%87%bd%e6%95%b0%e5%bc%8fapi" onclick="onNavClick(`#java函数式api-nav`)" id="java函数式api-nav">
									Java函数式API
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%a9%ba%e6%8c%87%e9%92%88%e6%a3%80%e6%9f%a5" onclick="onNavClick(`#空指针检查-nav`)" id="空指针检查-nav">
									空指针检查
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#kotlin" onclick="onNavClick(`#kotlin-nav`)" id="kotlin-nav">
									Kotlin
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%8f%98%e9%87%8f%e5%92%8c%e5%87%bd%e6%95%b0" onclick="onNavClick(`#变量和函数-nav`)" id="变量和函数-nav">
									变量和函数
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%8f%98%e9%87%8f" onclick="onNavClick(`#变量-nav`)" id="变量-nav">
									变量
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%87%bd%e6%95%b0" onclick="onNavClick(`#函数-nav`)" id="函数-nav">
									函数
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%a8%8b%e5%ba%8f%e7%9a%84%e9%80%bb%e8%be%91%e6%8e%a7%e5%88%b6" onclick="onNavClick(`#程序的逻辑控制-nav`)" id="程序的逻辑控制-nav">
									程序的逻辑控制
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#if" onclick="onNavClick(`#if-nav`)" id="if-nav">
									if
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#when%e6%9d%a1%e4%bb%b6%e8%af%ad%e5%8f%a5" onclick="onNavClick(`#when条件语句-nav`)" id="when条件语句-nav">
									when条件语句
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%aa%e7%8e%af%e8%af%ad%e5%8f%a5" onclick="onNavClick(`#循环语句-nav`)" id="循环语句-nav">
									循环语句
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%e7%bc%96%e7%a8%8b" onclick="onNavClick(`#面向对象编程-nav`)" id="面向对象编程-nav">
									面向对象编程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%b1%bb%e4%b8%8e%e5%af%b9%e8%b1%a1" onclick="onNavClick(`#类与对象-nav`)" id="类与对象-nav">
									类与对象
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%bb%a7%e6%89%bf%e4%b8%8e%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" onclick="onNavClick(`#继承与构造函数-nav`)" id="继承与构造函数-nav">
									继承与构造函数
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8e%a5%e5%8f%a3" onclick="onNavClick(`#接口-nav`)" id="接口-nav">
									接口
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%95%b0%e6%8d%ae%e7%b1%bb%e4%b8%8e%e5%8d%95%e4%be%8b%e7%b1%bb" onclick="onNavClick(`#数据类与单例类-nav`)" id="数据类与单例类-nav">
									数据类与单例类
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#lambda%e7%bc%96%e7%a8%8b" onclick="onNavClick(`#lambda编程-nav`)" id="lambda编程-nav">
									Lambda编程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%87%bd%e6%95%b0%e5%bc%8fapi" onclick="onNavClick(`#函数式api-nav`)" id="函数式api-nav">
									函数式API
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#maxby" onclick="onNavClick(`#maxby-nav`)" id="maxby-nav">
									maxBy
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#map" onclick="onNavClick(`#map-nav`)" id="map-nav">
									map
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#filter" onclick="onNavClick(`#filter-nav`)" id="filter-nav">
									filter
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#any" onclick="onNavClick(`#any-nav`)" id="any-nav">
									any
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#all" onclick="onNavClick(`#all-nav`)" id="all-nav">
									all
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#java%e5%87%bd%e6%95%b0%e5%bc%8fapi" onclick="onNavClick(`#java函数式api-nav`)" id="java函数式api-nav">
									Java函数式API
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%a9%ba%e6%8c%87%e9%92%88%e6%a3%80%e6%9f%a5" onclick="onNavClick(`#空指针检查-nav`)" id="空指针检查-nav">
									空指针检查
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://ntutn.top/">
            归零幻想
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://ntutn.top/">
        <div class="single-column-header-title">归零幻想</div>
        
        <div class="single-column-header-subtitle">零点还不算熬夜</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    android项目开发：Kotlin
                    
                    <div class="post-subtitle">
                        第一行代码的学习记录，这篇是Kotlin的语法熟悉。
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2021-10-12 03:11
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/%E5%AD%A6%E4%B9%A0">学习</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/android">Android</a>
                                &nbsp;
                            
                                <a href="/tags/%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81">第一行代码</a>
                                &nbsp;
                            
                                <a href="/tags/kotlin">Kotlin</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            20 min
                            
                            42 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <!-- raw HTML omitted -->
<h1 id="kotlin">Kotlin</h1>
<h2 id="变量和函数">变量和函数</h2>
<h3 id="变量">变量</h3>
<p>用<code>var</code>和<code>val</code>定义变量，并有类型自动推导的支持。</p>
<p><code>val</code>用来声明一个不可变的变量，<code>var</code>用来声明一个可变的变量。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">val</span> a = <span style="color:#b452cd">10</span>
<span style="color:#8b008b;font-weight:bold">var</span> b: Int = <span style="color:#b452cd">12</span>
</code></pre></div><p>Kotlin完全抛弃了java中的基本数据类型，完全使用对象数据类型。</p>
<table>
<thead>
<tr>
<th>java基本数据类型</th>
<th>Kotlin对象数据类型</th>
<th>数据类型说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>Int</td>
<td>整型</td>
</tr>
<tr>
<td>long</td>
<td>Long</td>
<td>长整型</td>
</tr>
<tr>
<td>short</td>
<td>Short</td>
<td>短整型</td>
</tr>
<tr>
<td>float</td>
<td>Float</td>
<td>单精度浮点型</td>
</tr>
<tr>
<td>double</td>
<td>Double</td>
<td>双精度浮点型</td>
</tr>
<tr>
<td>boolean</td>
<td>Boolean</td>
<td>布尔型</td>
</tr>
<tr>
<td>char</td>
<td>Char</td>
<td>字符型</td>
</tr>
<tr>
<td>byte</td>
<td>Byte</td>
<td>字节型</td>
</tr>
</tbody>
</table>
<h3 id="函数">函数</h3>
<p>语法：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>(args: Array&lt;String&gt;) {
    println(<span style="color:#cd5555">&#34;Hello World!&#34;</span>)
}
</code></pre></div><p>Kotlin中的函数在无必要时可以省略很多东西：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">kotlin.math.max</span>
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">largerNumber</span>(a: Int, b: Int) = max(a, b)
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>(args: Array&lt;String&gt;) {
    <span style="color:#8b008b;font-weight:bold">val</span> a = <span style="color:#b452cd">3</span>
    <span style="color:#8b008b;font-weight:bold">val</span> b = <span style="color:#b452cd">5</span>
    println(<span style="color:#cd5555">&#34;The larger number of a and b is </span><span style="color:#cd5555">${largerNumber(a, b)}</span><span style="color:#cd5555">&#34;</span>)
}
</code></pre></div><h2 id="程序的逻辑控制">程序的逻辑控制</h2>
<h3 id="if">if</h3>
<p>与java中的if语句相比，Kotlin中的if是可以有返回值的。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">judge</span>(score: Int) = <span style="color:#8b008b;font-weight:bold">if</span> (score &gt;= <span style="color:#b452cd">60</span>) <span style="color:#cd5555">&#34;你及格了&#34;</span> <span style="color:#8b008b;font-weight:bold">else</span> <span style="color:#cd5555">&#34;你还需要多努力&#34;</span>
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    println(judge(<span style="color:#b452cd">55</span>))
    println(judge(<span style="color:#b452cd">66</span>))
}
</code></pre></div><p>与此同时，Kotlin不再有java中的三元运算符<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>，语义上清晰了很多。</p>
<h3 id="when条件语句">when条件语句</h3>
<p>类似于java中的switch语句，根据变量的值执行不同的逻辑。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">judge</span>(score: Int) = <span style="color:#8b008b;font-weight:bold">if</span> (score &gt;= <span style="color:#b452cd">60</span>) <span style="color:#cd5555">&#34;你及格了&#34;</span> <span style="color:#8b008b;font-weight:bold">else</span> <span style="color:#cd5555">&#34;你还需要多努力&#34;</span>
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">getScore</span>(name: String) = <span style="color:#8b008b;font-weight:bold">when</span> (name) {
    <span style="color:#cd5555">&#34;Tom&#34;</span> -&gt; <span style="color:#b452cd">78</span>
    <span style="color:#cd5555">&#34;Jack&#34;</span> -&gt; <span style="color:#b452cd">35</span>
    <span style="color:#cd5555">&#34;Jerry&#34;</span> -&gt; <span style="color:#b452cd">84</span>
    <span style="color:#cd5555">&#34;Lee&#34;</span> -&gt; <span style="color:#b452cd">57</span>
    <span style="color:#8b008b;font-weight:bold">else</span> -&gt; <span style="color:#b452cd">0</span>
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    println(judge(getScore(<span style="color:#cd5555">&#34;Tom&#34;</span>)))
    println(judge(getScore(<span style="color:#cd5555">&#34;Jack&#34;</span>)))
    println(judge(getScore(<span style="color:#cd5555">&#34;Bill&#34;</span>)))
}
</code></pre></div><p>对我来说，最令人振奋的是再也不需要在每个分支里面都写个break了。其次when也是有返回值的，这和其他特性组合写出来的代码非常简洁优雅。</p>
<p>写个小demo吧。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">Speakable</span> {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>()
}
<span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Dog</span> : Speakable {
    <span style="color:#8b008b;font-weight:bold">override</span> <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() {
        println(<span style="color:#cd5555">&#34;汪汪汪&#34;</span>)
    }
}
<span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Cat</span> : Speakable {
    <span style="color:#8b008b;font-weight:bold">override</span> <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() {
        println(<span style="color:#cd5555">&#34;喵喵喵&#34;</span>)
    }
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">climb</span>() {
        println(<span style="color:#cd5555">&#34;小猫会爬树&#34;</span>)
    }
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">generateAnimal</span>(): Speakable? = <span style="color:#8b008b;font-weight:bold">when</span> ((<span style="color:#b452cd">1.</span>.<span style="color:#b452cd">3</span>).random()) {
    <span style="color:#b452cd">1</span> -&gt; Dog()
    <span style="color:#b452cd">2</span> -&gt; Cat()
    <span style="color:#8b008b;font-weight:bold">else</span> -&gt; <span style="color:#8b008b;font-weight:bold">null</span>
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    <span style="color:#8b008b;font-weight:bold">when</span> (<span style="color:#8b008b;font-weight:bold">val</span> animal = generateAnimal()) {
        <span style="color:#8b008b;font-weight:bold">is</span> Dog -&gt; {
            println(<span style="color:#cd5555">&#34;生成的动物是小狗&#34;</span>)
            animal.speak()
        }
        <span style="color:#8b008b;font-weight:bold">is</span> Cat -&gt; {
            println(<span style="color:#cd5555">&#34;生成的动物是小猫&#34;</span>)
            animal.speak()
            animal.climb()
        }
        <span style="color:#8b008b;font-weight:bold">else</span> -&gt; println(<span style="color:#cd5555">&#34;生成动物时出现问题&#34;</span>)
    }
}
</code></pre></div><h3 id="循环语句">循环语句</h3>
<p>Kotlin中有两类循环，其中<code>while</code>循环与java学过的while循环非常相似，只说下有差异的<code>for</code>循环吧。</p>
<p>Kotlin的for循环只有for..in式的了，如<code>for(i in list)</code>。</p>
<p>但有时对数组下标进行遍历还是有必要的。于是我们要先了解下Kotlin的<code>区间</code>的概念。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">val</span> range = <span style="color:#b452cd">1.</span>.<span style="color:#b452cd">10</span>
</code></pre></div><p>这表示<code>[1,10]</code>。但很多时候，我们需要左开右闭区间，比如数组有三个元素，我们需要<code>[0,3)</code>表示数组的下标。此时可以使用<code>util</code>关键字。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">val</span> indexRange = <span style="color:#b452cd">0</span> util <span style="color:#b452cd">3</span>
</code></pre></div><p>有了range再和前面的for配合就完全可以替代之前java里面的for的作用了：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">val</span> array = arrayOf(<span style="color:#cd5555">&#34;Bob&#34;</span>, <span style="color:#cd5555">&#34;John&#34;</span>, <span style="color:#cd5555">&#34;Jackson&#34;</span>)
<span style="color:#8b008b;font-weight:bold">for</span> (i <span style="color:#8b008b;font-weight:bold">in</span> <span style="color:#b452cd">0</span> util array.size) {
    println(<span style="color:#cd5555">&#34;</span><span style="color:#cd5555">$i</span><span style="color:#cd5555">:</span><span style="color:#cd5555">${array[i]}</span><span style="color:#cd5555">&#34;</span>)
}
</code></pre></div><p>此外，还可以用<code>step</code>指定步长值，实现”隔几个输出一次“的效果：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">for</span> (i <span style="color:#8b008b;font-weight:bold">in</span> <span style="color:#b452cd">0</span> util <span style="color:#b452cd">10</span> step <span style="color:#b452cd">2</span>) {
    println(i)
}
</code></pre></div><p>如果需要10循环到1,则需要<code>downTo</code>关键字，</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">for</span> (i <span style="color:#8b008b;font-weight:bold">in</span> <span style="color:#b452cd">10</span> downTo <span style="color:#b452cd">1</span>) {
    println(i)
}
</code></pre></div><!-- raw HTML omitted -->
<h2 id="面向对象编程">面向对象编程</h2>
<h3 id="类与对象">类与对象</h3>
<p>与java的class相比Kotlin的class看上去没有多少改变，但创建对象不用new了。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Person</span>(<span style="color:#8b008b;font-weight:bold">val</span> name: String) {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() = <span style="color:#cd5555">&#34;</span><span style="color:#cd5555">$name</span><span style="color:#cd5555"> is speaking.&#34;</span>
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    Person(<span style="color:#cd5555">&#34;Jack&#34;</span>).speak()
}
</code></pre></div><h3 id="继承与构造函数">继承与构造函数</h3>
<p>与java类似，Kotlin仍然是单继承，可以继承一个类实现多个接口。但继承的写法与java略有不同。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">open</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Animal</span><span style="color:#228b22">//非抽象类只有带了open才可以继承
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">Speakable</span> {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>()
}
<span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Dog</span> : Animal(), Speakable {
    <span style="color:#8b008b;font-weight:bold">override</span> <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() {
        println(<span style="color:#cd5555">&#34;汪汪汪&#34;</span>)
    }
}
<span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Cat</span> : Animal(), Speakable {
    <span style="color:#8b008b;font-weight:bold">override</span> <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() {
        println(<span style="color:#cd5555">&#34;喵喵喵&#34;</span>)
    }
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">climb</span>() {
        println(<span style="color:#cd5555">&#34;小猫会爬树&#34;</span>)
    }
}
</code></pre></div><p>Kotlin中的构造函数分为主构造函数和次构造函数。如：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Student</span>(<span style="color:#8b008b;font-weight:bold">val</span> sno: String, <span style="color:#8b008b;font-weight:bold">val</span> grade: Int, name: String, age: Int) {
    <span style="color:#8b008b;font-weight:bold">constructor</span>(name: String, age: Int) : <span style="color:#8b008b;font-weight:bold">this</span>(<span style="color:#cd5555">&#34;&#34;</span>, <span style="color:#b452cd">0</span>, name, age)
    <span style="color:#8b008b;font-weight:bold">constructor</span>() : <span style="color:#8b008b;font-weight:bold">this</span>(<span style="color:#cd5555">&#34;&#34;</span>, <span style="color:#b452cd">0</span>)
    <span style="color:#8b008b;font-weight:bold">init</span> {
        println(<span style="color:#cd5555">&#34;</span><span style="color:#cd5555">$age</span><span style="color:#cd5555"> 的 </span><span style="color:#cd5555">$name</span><span style="color:#cd5555"> 被初始化了。&#34;</span>)
    }
}
</code></pre></div><p>次构造函数必须调用主构造函数（如果有），继承一个类必须调用他的构造函数（这也是为什么常常继承的类后面带着个括号）。</p>
<blockquote>
<p>Kotlin函数的参数可以有默认值的，大多数情况根本不需要使用多个构造函数。
主构造函数中<code>val</code>和<code>var</code>标记的变量将直接成为类的属性，没有这个标记的变量则只能在init block中访问。</p>
</blockquote>
<h3 id="接口">接口</h3>
<p>接口与java的接口是类似的。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">Study</span> {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">readBooks</span>()
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doHomework</span>() {
        println(<span style="color:#cd5555">&#34;Do homework default implementation&#34;</span>)
    }
}
</code></pre></div><p>java与Kotlin中的可见性修饰略有不同。</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>java</th>
<th>Kotlin</th>
</tr>
</thead>
<tbody>
<tr>
<td>public</td>
<td>所有类可见</td>
<td>所有类可见（默认）</td>
</tr>
<tr>
<td>private</td>
<td>当前类可见</td>
<td>当前类可见</td>
</tr>
<tr>
<td>protected</td>
<td>当前类、子类、同一包路径下的类可见</td>
<td>当前类、子类可见</td>
</tr>
<tr>
<td>default</td>
<td>同一包路径下的类可见</td>
<td>无</td>
</tr>
<tr>
<td>internal</td>
<td>无</td>
<td>同一模块中的类可见</td>
</tr>
</tbody>
</table>
<h3 id="数据类与单例类">数据类与单例类</h3>
<p>数据类在当今的系统设计中占据了重要的地位，他们格式非常固定，一般实现各种构造函数、getter和setter，重写<code>equals()</code>、<code>hashCode()</code>、<code>toString()</code>
这几个方法，真的写腻了。很多ide都提供了一键生成这些样板代码的方法，更有项目Lombok添加个注解在编译时生成这些方法<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>。</p>
<p>而Kotlin中对于数据类有了专门的支持。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">data</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Student</span>(<span style="color:#8b008b;font-weight:bold">val</span> sno: String, <span style="color:#8b008b;font-weight:bold">val</span> name: String, <span style="color:#8b008b;font-weight:bold">var</span> age: Int)
</code></pre></div><p>idea对于Kotlin有很好的支持。我们用下面的步骤将上面的代码转换为java形式：</p>
<ol>
<li>Tools-&gt;Kotlin-&gt;Show Kotlin ByteCode</li>
<li>Decompile</li>
</ol>
<p>得到的代码如下：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">kotlin.Metadata</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">kotlin.jvm.internal.Intrinsics</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.jetbrains.annotations.NotNull</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.jetbrains.annotations.Nullable</span>;
<span style="color:#707a7c">@Metadata</span>(
        mv = {1, 4, 0},
        bv = {1, 0, 3},
        k = 1,
        d1 = {<span style="color:#cd5555">&#34;\u0000\&#34;\n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0000\n\u0002\u0010\u000e\n\u0002\b\u0002\n\u0002\u0010\b\n\u0002\b\r\n\u0002\u0010\u000b\n\u0002\b\u0004\b\u0086\b\u0018\u00002\u00020\u0001B\u001d\u0012\u0006\u0010\u0002\u001a\u00020\u0003\u0012\u0006\u0010\u0004\u001a\u00020\u0003\u0012\u0006\u0010\u0005\u001a\u00020\u0006¢\u0006\u0002\u0010\u0007J\t\u0010\u000f\u001a\u00020\u0003HÆ\u0003J\t\u0010\u0010\u001a\u00020\u0003HÆ\u0003J\t\u0010\u0011\u001a\u00020\u0006HÆ\u0003J&#39;\u0010\u0012\u001a\u00020\u00002\b\b\u0002\u0010\u0002\u001a\u00020\u00032\b\b\u0002\u0010\u0004\u001a\u00020\u00032\b\b\u0002\u0010\u0005\u001a\u00020\u0006HÆ\u0001J\u0013\u0010\u0013\u001a\u00020\u00142\b\u0010\u0015\u001a\u0004\u0018\u00010\u0001HÖ\u0003J\t\u0010\u0016\u001a\u00020\u0006HÖ\u0001J\t\u0010\u0017\u001a\u00020\u0003HÖ\u0001R\u001a\u0010\u0005\u001a\u00020\u0006X\u0086\u000e¢\u0006\u000e\n\u0000\u001a\u0004\b\b\u0010\t\&#34;\u0004\b\n\u0010\u000bR\u0011\u0010\u0004\u001a\u00020\u0003¢\u0006\b\n\u0000\u001a\u0004\b\f\u0010\rR\u0011\u0010\u0002\u001a\u00020\u0003¢\u0006\b\n\u0000\u001a\u0004\b\u000e\u0010\r¨\u0006\u0018&#34;</span>},
        d2 = {<span style="color:#cd5555">&#34;LStudent;&#34;</span>, <span style="color:#cd5555">&#34;&#34;</span>, <span style="color:#cd5555">&#34;sno&#34;</span>, <span style="color:#cd5555">&#34;&#34;</span>, <span style="color:#cd5555">&#34;name&#34;</span>, <span style="color:#cd5555">&#34;age&#34;</span>, <span style="color:#cd5555">&#34;&#34;</span>, <span style="color:#cd5555">&#34;(Ljava/lang/String;Ljava/lang/String;I)V&#34;</span>, <span style="color:#cd5555">&#34;getAge&#34;</span>, <span style="color:#cd5555">&#34;()I&#34;</span>, <span style="color:#cd5555">&#34;setAge&#34;</span>, <span style="color:#cd5555">&#34;(I)V&#34;</span>, <span style="color:#cd5555">&#34;getName&#34;</span>, <span style="color:#cd5555">&#34;()Ljava/lang/String;&#34;</span>, <span style="color:#cd5555">&#34;getSno&#34;</span>, <span style="color:#cd5555">&#34;component1&#34;</span>, <span style="color:#cd5555">&#34;component2&#34;</span>, <span style="color:#cd5555">&#34;component3&#34;</span>, <span style="color:#cd5555">&#34;copy&#34;</span>, <span style="color:#cd5555">&#34;equals&#34;</span>, <span style="color:#cd5555">&#34;&#34;</span>, <span style="color:#cd5555">&#34;other&#34;</span>, <span style="color:#cd5555">&#34;hashCode&#34;</span>, <span style="color:#cd5555">&#34;toString&#34;</span>, <span style="color:#cd5555">&#34;kotlin-learning.main&#34;</span>}
)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Student</span> {
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">final</span> String sno;
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">final</span> String name;
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">int</span> age;
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> String <span style="color:#008b45">getSno</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span>;
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> String <span style="color:#008b45">getName</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">getAge</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setAge</span>(<span style="color:#00688b;font-weight:bold">int</span> var1) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> = var1;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">Student</span>(<span style="color:#707a7c">@NotNull</span> String sno, <span style="color:#707a7c">@NotNull</span> String name, <span style="color:#00688b;font-weight:bold">int</span> age) {
        Intrinsics.<span style="color:#658b00">checkNotNullParameter</span>(sno, <span style="color:#cd5555">&#34;sno&#34;</span>);
        Intrinsics.<span style="color:#658b00">checkNotNullParameter</span>(name, <span style="color:#cd5555">&#34;name&#34;</span>);
        <span style="color:#8b008b;font-weight:bold">super</span>();
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span> = sno;
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span> = name;
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> = age;
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> String <span style="color:#008b45">component1</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span>;
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> String <span style="color:#008b45">component2</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">component3</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span>;
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> Student <span style="color:#008b45">copy</span>(<span style="color:#707a7c">@NotNull</span> String sno, <span style="color:#707a7c">@NotNull</span> String name, <span style="color:#00688b;font-weight:bold">int</span> age) {
        Intrinsics.<span style="color:#658b00">checkNotNullParameter</span>(sno, <span style="color:#cd5555">&#34;sno&#34;</span>);
        Intrinsics.<span style="color:#658b00">checkNotNullParameter</span>(name, <span style="color:#cd5555">&#34;name&#34;</span>);
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> Student(sno, name, age);
    }
    <span style="color:#228b22">// $FF: synthetic method
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> Student <span style="color:#008b45">copy$default</span>(Student var0, String var1, String var2, <span style="color:#00688b;font-weight:bold">int</span> var3, <span style="color:#00688b;font-weight:bold">int</span> var4, Object var5) {
        <span style="color:#8b008b;font-weight:bold">if</span> ((var4 &amp; 1) != 0) {
            var1 = var0.<span style="color:#658b00">sno</span>;
        }
        <span style="color:#8b008b;font-weight:bold">if</span> ((var4 &amp; 2) != 0) {
            var2 = var0.<span style="color:#658b00">name</span>;
        }
        <span style="color:#8b008b;font-weight:bold">if</span> ((var4 &amp; 4) != 0) {
            var3 = var0.<span style="color:#658b00">age</span>;
        }
        <span style="color:#8b008b;font-weight:bold">return</span> var0.<span style="color:#658b00">copy</span>(var1, var2, var3);
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">toString</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">&#34;Student(sno=&#34;</span> + <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span> + <span style="color:#cd5555">&#34;, name=&#34;</span> + <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span> + <span style="color:#cd5555">&#34;, age=&#34;</span> + <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> + <span style="color:#cd5555">&#34;)&#34;</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">hashCode</span>() {
        String var10000 = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span>;
        <span style="color:#00688b;font-weight:bold">int</span> var1 = (var10000 != <span style="color:#8b008b;font-weight:bold">null</span> ? var10000.<span style="color:#658b00">hashCode</span>() : 0) * 31;
        String var10001 = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span>;
        <span style="color:#8b008b;font-weight:bold">return</span> (var1 + (var10001 != <span style="color:#8b008b;font-weight:bold">null</span> ? var10001.<span style="color:#658b00">hashCode</span>() : 0)) * 31 + <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">boolean</span> <span style="color:#008b45">equals</span>(<span style="color:#707a7c">@Nullable</span> Object var1) {
        <span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span> != var1) {
            <span style="color:#8b008b;font-weight:bold">if</span> (var1 <span style="color:#8b008b;font-weight:bold">instanceof</span> Student) {
                Student var2 = (Student) var1;
                <span style="color:#8b008b;font-weight:bold">if</span> (Intrinsics.<span style="color:#658b00">areEqual</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span>, var2.<span style="color:#658b00">sno</span>) &amp;&amp; Intrinsics.<span style="color:#658b00">areEqual</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span>, var2.<span style="color:#658b00">name</span>) &amp;&amp; <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> == var2.<span style="color:#658b00">age</span>) {
                    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">true</span>;
                }
            }
            <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">false</span>;
        } <span style="color:#8b008b;font-weight:bold">else</span> {
            <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">true</span>;
        }
    }
}
</code></pre></div><p>孰优孰劣，一目了然。</p>
<p>类似的，Kotlin也对单例类提供了支持。如：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">object</span> <span style="color:#008b45;font-weight:bold">Singleton</span> {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">singletonTest</span>() {
        println(<span style="color:#cd5555">&#34;Singleton test is called.&#34;</span>)
    }
}
</code></pre></div><p>这和你费了半天劲写出来的java代码作用是一样的：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">kotlin.Metadata</span>;
<span style="color:#707a7c">@Metadata</span>(
        mv = {1, 4, 0},
        bv = {1, 0, 3},
        k = 1,
        d1 = {<span style="color:#cd5555">&#34;\u0000\u0012\n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0002\b\u0002\n\u0002\u0010\u0002\n\u0000\bÆ\u0002\u0018\u00002\u00020\u0001B\u0007\b\u0002¢\u0006\u0002\u0010\u0002J\u0006\u0010\u0003\u001a\u00020\u0004¨\u0006\u0005&#34;</span>},
        d2 = {<span style="color:#cd5555">&#34;LSingleton;&#34;</span>, <span style="color:#cd5555">&#34;&#34;</span>, <span style="color:#cd5555">&#34;()V&#34;</span>, <span style="color:#cd5555">&#34;singletonTest&#34;</span>, <span style="color:#cd5555">&#34;&#34;</span>, <span style="color:#cd5555">&#34;kotlin-learning.main&#34;</span>}
)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Singleton</span> {
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> Singleton INSTANCE;
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">singletonTest</span>() {
        String var1 = <span style="color:#cd5555">&#34;Singleton test is called.&#34;</span>;
        <span style="color:#00688b;font-weight:bold">boolean</span> var2 = <span style="color:#8b008b;font-weight:bold">false</span>;
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(var1);
    }
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#008b45">Singleton</span>() {
    }
    <span style="color:#8b008b;font-weight:bold">static</span> {
        Singleton var0 = <span style="color:#8b008b;font-weight:bold">new</span> Singleton();
        INSTANCE = var0;
    }
}
</code></pre></div><h2 id="lambda编程">Lambda编程</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    <span style="color:#8b008b;font-weight:bold">val</span> map = mapOf(<span style="color:#cd5555">&#34;Apple&#34;</span> to <span style="color:#b452cd">1</span>, <span style="color:#cd5555">&#34;Banana&#34;</span> to <span style="color:#b452cd">2</span>, <span style="color:#cd5555">&#34;Orange&#34;</span> to <span style="color:#b452cd">3</span>, <span style="color:#cd5555">&#34;Pear&#34;</span> to <span style="color:#b452cd">4</span>, <span style="color:#cd5555">&#34;Grape&#34;</span> to <span style="color:#b452cd">5</span>)
    <span style="color:#8b008b;font-weight:bold">for</span> ((fruit, number) <span style="color:#8b008b;font-weight:bold">in</span> map) {
        println(<span style="color:#cd5555">&#34;fruit is </span><span style="color:#cd5555">$fruit</span><span style="color:#cd5555">, number is </span><span style="color:#cd5555">$number</span><span style="color:#cd5555">&#34;</span>)
    }
}
</code></pre></div><h3 id="函数式api">函数式API</h3>
<h4 id="maxby">maxBy</h4>
<p>集合中最长的字符串。</p>
<h3 id="map">map</h3>
<p>将集合中每个元素都映射到另一个元素。</p>
<h4 id="filter">filter</h4>
<p>过滤集合中的数据。</p>
<h4 id="any">any</h4>
<p>至少有一个元素满足条件。</p>
<h4 id="all">all</h4>
<p>所有元素都满足条件。</p>
<h3 id="java函数式api">Java函数式API</h3>
<p>对于java中的单抽象方法可使用函数式API。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">Thread {
    println(<span style="color:#cd5555">&#34;Thread is running&#34;</span>)
}.start()
</code></pre></div><h2 id="空指针检查">空指针检查</h2>
<p>写java时最常见的错误就是<code>java.lang.NullPointerException</code>了吧。在Kotlin中，情况有一些改善。</p>
<p>与java不同，Kotlin中的变量默认是不可空的。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doStudy</span>(study: Study) {
    study.readBooks()
    study.doHomework()
}
</code></pre></div><p>如果你给这个函数传一个可能为null的值，在编译期间就会得到错误提示。</p>
<p>当然，很多情况我们还是需要让我们的函数接受一个可空的值的，则可以用这样的写法：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doStudy</span>(study: Study?) {
    <span style="color:#8b008b;font-weight:bold">if</span> (study != <span style="color:#8b008b;font-weight:bold">null</span>) {
        study.readBooks()
        study.doHomework()
    }
}
</code></pre></div><p>但在Kotlin中还有更好的方法：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doStudy</span>(study: Study?) {
    study?.readBooks()
    study?.doHomework()
}
</code></pre></div><p>用上<code>let</code>我们还可以写得更优雅：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doStudy</span>(study: Study?) {
    study?.let {
        <span style="color:#8b008b;font-weight:bold">it</span>.readBooks()
        <span style="color:#8b008b;font-weight:bold">it</span>.doHomework()
    }
}
</code></pre></div><p><code>?.</code>表示只有不为空时才正常调用。</p>
<p>有时我们需要这样的逻辑：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">getTextLength</span>(text: String?): Int {
    <span style="color:#8b008b;font-weight:bold">if</span> (text != <span style="color:#8b008b;font-weight:bold">null</span>) {
        <span style="color:#8b008b;font-weight:bold">return</span> text.length
    }
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#b452cd">0</span>
}
</code></pre></div><p>Kotlin也有个方便的操作符：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">getTextLength</span>(text: String?) = text?.length ?: <span style="color:#b452cd">0</span>
</code></pre></div><p><code>?:</code>表示前面为空时返回后面的值。</p>
<p>当然，有些业务逻辑中Kotlin不一定能正确推断出你的变量是否可能为空，这时Kotlin也提供了让你自己操纵它的机会：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">var</span> content: String? = <span style="color:#8b008b;font-weight:bold">null</span>
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">initContent</span>() {
    content = <span style="color:#cd5555">&#34;https://ntutn.top&#34;</span>
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    initContent()
    <span style="color:#8b008b;font-weight:bold">if</span> (content != <span style="color:#8b008b;font-weight:bold">null</span>) {
        printContent()
    }
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">printContent</span>() {
    println(content!!)
}
</code></pre></div><section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>参考<a href="https://www.w3cschool.cn/java/java-ternary-operator.html">Java中的三元运算符</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p><a href="https://projectlombok.org/">Lombok</a>，用注解的方式简化java代码，但要求使用的ide必须安装lombok插件才能正确识别lombok生成的代码，有人认为这是在”强奸队友“。另外lombok的实现调用了jdk未公开的方法也引发争议。 <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">最后修改于 2021-10-12</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://ntutn.top/posts/%E6%8C%81%E4%B9%85%E5%8C%96/">
			下回<br>android项目开发：持久化
                </a>
                
                
                
                <a class="older-posts" href="https://ntutn.top/posts/%E5%B9%B2%E6%8E%89macos%E7%9A%84ocsp/">
			上回<br>干掉macOS的OCSP
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                










<script src="https://utteranc.es/client.js"
        repo="zerofancy/zerofancy.github.io"
        issue-term="title"
        label=""
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	CC BY-SA 4.0
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
