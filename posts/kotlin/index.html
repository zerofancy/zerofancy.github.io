<!DOCTYPE html>
<html><head>
<title>android项目开发：Kotlin</title>
<meta charset="utf-8"/>
<meta content="IE=edge" name="X-UA-Compatible"/>
<meta content="" name="google-site-verification"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
<meta content="telephone=no" name="format-detection"/>
<meta content="第一行代码的学习记录，这篇是Kotlin的语法熟悉。" name="description"/>
<meta content="webkit" name="renderer"/>
<meta content="#ffffff" name="theme-color"/>
<meta content="android项目开发：Kotlin" property="og:title"/>
<meta content="第一行代码的学习记录，这篇是Kotlin的语法熟悉。" property="og:description"/>
<meta content="article" property="og:type"/>
<meta content="https://ntutn.top/posts/kotlin/" property="og:url"/><meta content="posts" property="article:section"/>
<meta content="2021-10-12T03:11:37+08:00" property="article:published_time"/>
<meta content="2021-10-12T03:11:37+08:00" property="article:modified_time"/><meta content="归零幻想" property="og:site_name"/>
<link href="//images.ntutn.top/favicon.ico" rel="icon"/>
<script src="/js/toc.js"></script>
<link href="/vendor/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/scss/journal.min.c5d92f380bf10f6849c7ac487c7df2b22c081e0851e5339224f1ae29210b20d2.css" integrity="sha256-xdkvOAvxD2hJx6xIfH3ysiwIHghR5TOSJPGuKSELINI=" media="screen" rel="stylesheet"/>
<link href="/scss/dark-mode.min.9f8d8c2df9285089d141edd4a50cb7506c7948e6ab79a29968dced1bd0ab7d22.css" integrity="sha256-n42MLfkoUInRQe3UpQy3UGx5SOareaKZaNztG9CrfSI=" media="screen" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css?family=Material+Icons" rel="stylesheet"/>
<script data-cf-beacon='{"token": 5a03d307f5214109a1e7c8b2cf306a3d' defer="" src="https://static.cloudflareinsights.com/beacon.min.js">
</script>
<style>
    pre code {
        color: black;
        -comment: "感谢评论区 https://github.com/lx200916 指出博客代码块深色模式问题";
    }
</style>
<script src="https://unpkg.com/zoomtastic@2.2.1"></script>
<script data-selector="code.language-kotlin" src="https://unpkg.com/kotlin-playground@1"></script>
<script>
    document.addEventListener("DOMContentLoaded", function(event) { 
        document.querySelectorAll("div.post-body-wrapper img").forEach(function(element){
            element.setAttribute("zoomtastic", true)
            element.style.maxWidth="60%"
        })
		
		Zoomtastic.mount({
			size: '95%',
			easing: 'ease',
			duration: 300,
			background: 'rgba(0, 0, 0, 0.9)',
			filter: 'drop-shadow(0 2px 16px rgba(0, 0, 0, 0.3))',
			animation: 'slide' 
		});
		
		Zoomtastic.listen('[zoomtastic]', 'src');
    });

	
	var _hmt = _hmt || [];
	(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?298c58938f9266e6098936c4f71a9a83";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
	})();

</script>
</head>
<body>
<div id="app"><div class="side-container" id="sideContainer">
<a class="a-block nav-head false" href="https://ntutn.top/">
<div class="nav-title">
            归零幻想
        </div>
<div class="nav-subtitle">
            零点还不算熬夜
        </div>
</a>
<div class="nav-link-list">
<a class="a-block nav-link-item false" href="/project">
                项目
            </a>
<a class="a-block nav-link-item false" href="/tags">
                标签
            </a>
<a class="a-block nav-link-item false" href="/zwiki">
                WIKI
            </a>
<a class="a-block nav-link-item false" href="/friends">
                友链
            </a>
<a class="a-block nav-link-item false" href="/about">
                关于
            </a>
<a class="a-block nav-link-item false" href="/index.xml">
                RSS
            </a>
<a class="a-block nav-link-item active" href="/posts">
                归档
            </a>
</div>
<div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br/>
移植自 <a href="https://mak1t0.cc/" rel="noreferrer noopener" target="_blank">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" rel="noreferrer noopener" target="_blank">Journal.</a> <br/>
<br/>

©
	
	CC BY-SA 4.0
	

    </div>
</div><div class="extra-container" id="extraContainer">
<div :class="{ invisible: scrollY &lt;= 140 }" class="toc animated-visibility">
<div class="toc-content">
<center>- 目录 -</center>
<ul>
<li>
<a href="#kotlin" id="kotlin-nav" onclick="onNavClick(`#kotlin-nav`)">
									Kotlin
								</a>
</li>
<ul>
<li>
<a href="#%e5%8f%98%e9%87%8f%e5%92%8c%e5%87%bd%e6%95%b0" id="变量和函数-nav" onclick="onNavClick(`#变量和函数-nav`)">
									变量和函数
								</a>
</li>
<ul>
<li>
<a href="#%e5%8f%98%e9%87%8f" id="变量-nav" onclick="onNavClick(`#变量-nav`)">
									变量
								</a>
</li>
<li>
<a href="#%e5%87%bd%e6%95%b0" id="函数-nav" onclick="onNavClick(`#函数-nav`)">
									函数
								</a>
</li>
</ul>
<li>
<a href="#%e7%a8%8b%e5%ba%8f%e7%9a%84%e9%80%bb%e8%be%91%e6%8e%a7%e5%88%b6" id="程序的逻辑控制-nav" onclick="onNavClick(`#程序的逻辑控制-nav`)">
									程序的逻辑控制
								</a>
</li>
<ul>
<li>
<a href="#if" id="if-nav" onclick="onNavClick(`#if-nav`)">
									if
								</a>
</li>
<li>
<a href="#when%e6%9d%a1%e4%bb%b6%e8%af%ad%e5%8f%a5" id="when条件语句-nav" onclick="onNavClick(`#when条件语句-nav`)">
									when条件语句
								</a>
</li>
<li>
<a href="#%e5%be%aa%e7%8e%af%e8%af%ad%e5%8f%a5" id="循环语句-nav" onclick="onNavClick(`#循环语句-nav`)">
									循环语句
								</a>
</li>
</ul>
<li>
<a href="#%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%e7%bc%96%e7%a8%8b" id="面向对象编程-nav" onclick="onNavClick(`#面向对象编程-nav`)">
									面向对象编程
								</a>
</li>
<ul>
<li>
<a href="#%e7%b1%bb%e4%b8%8e%e5%af%b9%e8%b1%a1" id="类与对象-nav" onclick="onNavClick(`#类与对象-nav`)">
									类与对象
								</a>
</li>
<li>
<a href="#%e7%bb%a7%e6%89%bf%e4%b8%8e%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" id="继承与构造函数-nav" onclick="onNavClick(`#继承与构造函数-nav`)">
									继承与构造函数
								</a>
</li>
<li>
<a href="#%e6%8e%a5%e5%8f%a3" id="接口-nav" onclick="onNavClick(`#接口-nav`)">
									接口
								</a>
</li>
<li>
<a href="#%e6%95%b0%e6%8d%ae%e7%b1%bb%e4%b8%8e%e5%8d%95%e4%be%8b%e7%b1%bb" id="数据类与单例类-nav" onclick="onNavClick(`#数据类与单例类-nav`)">
									数据类与单例类
								</a>
</li>
</ul>
<li>
<a href="#lambda%e7%bc%96%e7%a8%8b" id="lambda编程-nav" onclick="onNavClick(`#lambda编程-nav`)">
									Lambda编程
								</a>
</li>
<ul>
<li>
<a href="#%e5%87%bd%e6%95%b0%e5%bc%8fapi" id="函数式api-nav" onclick="onNavClick(`#函数式api-nav`)">
									函数式API
								</a>
</li>
<ul>
<li>
<a href="#maxby" id="maxby-nav" onclick="onNavClick(`#maxby-nav`)">
									maxBy
								</a>
</li>
</ul>
<li>
<a href="#map" id="map-nav" onclick="onNavClick(`#map-nav`)">
									map
								</a>
</li>
<ul>
<li>
<a href="#filter" id="filter-nav" onclick="onNavClick(`#filter-nav`)">
									filter
								</a>
</li>
<li>
<a href="#any" id="any-nav" onclick="onNavClick(`#any-nav`)">
									any
								</a>
</li>
<li>
<a href="#all" id="all-nav" onclick="onNavClick(`#all-nav`)">
									all
								</a>
</li>
</ul>
<li>
<a href="#java%e5%87%bd%e6%95%b0%e5%bc%8fapi" id="java函数式api-nav" onclick="onNavClick(`#java函数式api-nav`)">
									Java函数式API
								</a>
</li>
</ul>
<li>
<a href="#%e7%a9%ba%e6%8c%87%e9%92%88%e6%a3%80%e6%9f%a5" id="空指针检查-nav" onclick="onNavClick(`#空指针检查-nav`)">
									空指针检查
								</a>
</li>
</ul>
</ul></div>
</div>
<div class="pagination">
<a :class="{ invisible: scrollY == 0 }" class="pagination-action animated-visibility" href="#top" id="globalBackToTop">
<i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
</a>
<a class="pagination-action" id="darkModeToggleButton" type="button">
<span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
</a>
</div>
</div>
<div class="single-column-drawer-container" id="drawer" v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
<div class="drawer-content">
<div class="drawer-menu">
<a class="a-block drawer-menu-item false" href="/project">
                    项目
                </a>
<a class="a-block drawer-menu-item false" href="/tags">
                    标签
                </a>
<a class="a-block drawer-menu-item false" href="/zwiki">
                    WIKI
                </a>
<a class="a-block drawer-menu-item false" href="/friends">
                    友链
                </a>
<a class="a-block drawer-menu-item false" href="/about">
                    关于
                </a>
<a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS
                </a>
<a class="a-block drawer-menu-item active" href="/posts">
                    归档
                </a>
<div class="toc">
<div class="toc-content">
<center>- 目录 -</center>
<ul>
<li>
<a href="#kotlin" id="kotlin-nav" onclick="onNavClick(`#kotlin-nav`)">
									Kotlin
								</a>
</li>
<ul>
<li>
<a href="#%e5%8f%98%e9%87%8f%e5%92%8c%e5%87%bd%e6%95%b0" id="变量和函数-nav" onclick="onNavClick(`#变量和函数-nav`)">
									变量和函数
								</a>
</li>
<ul>
<li>
<a href="#%e5%8f%98%e9%87%8f" id="变量-nav" onclick="onNavClick(`#变量-nav`)">
									变量
								</a>
</li>
<li>
<a href="#%e5%87%bd%e6%95%b0" id="函数-nav" onclick="onNavClick(`#函数-nav`)">
									函数
								</a>
</li>
</ul>
<li>
<a href="#%e7%a8%8b%e5%ba%8f%e7%9a%84%e9%80%bb%e8%be%91%e6%8e%a7%e5%88%b6" id="程序的逻辑控制-nav" onclick="onNavClick(`#程序的逻辑控制-nav`)">
									程序的逻辑控制
								</a>
</li>
<ul>
<li>
<a href="#if" id="if-nav" onclick="onNavClick(`#if-nav`)">
									if
								</a>
</li>
<li>
<a href="#when%e6%9d%a1%e4%bb%b6%e8%af%ad%e5%8f%a5" id="when条件语句-nav" onclick="onNavClick(`#when条件语句-nav`)">
									when条件语句
								</a>
</li>
<li>
<a href="#%e5%be%aa%e7%8e%af%e8%af%ad%e5%8f%a5" id="循环语句-nav" onclick="onNavClick(`#循环语句-nav`)">
									循环语句
								</a>
</li>
</ul>
<li>
<a href="#%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%e7%bc%96%e7%a8%8b" id="面向对象编程-nav" onclick="onNavClick(`#面向对象编程-nav`)">
									面向对象编程
								</a>
</li>
<ul>
<li>
<a href="#%e7%b1%bb%e4%b8%8e%e5%af%b9%e8%b1%a1" id="类与对象-nav" onclick="onNavClick(`#类与对象-nav`)">
									类与对象
								</a>
</li>
<li>
<a href="#%e7%bb%a7%e6%89%bf%e4%b8%8e%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0" id="继承与构造函数-nav" onclick="onNavClick(`#继承与构造函数-nav`)">
									继承与构造函数
								</a>
</li>
<li>
<a href="#%e6%8e%a5%e5%8f%a3" id="接口-nav" onclick="onNavClick(`#接口-nav`)">
									接口
								</a>
</li>
<li>
<a href="#%e6%95%b0%e6%8d%ae%e7%b1%bb%e4%b8%8e%e5%8d%95%e4%be%8b%e7%b1%bb" id="数据类与单例类-nav" onclick="onNavClick(`#数据类与单例类-nav`)">
									数据类与单例类
								</a>
</li>
</ul>
<li>
<a href="#lambda%e7%bc%96%e7%a8%8b" id="lambda编程-nav" onclick="onNavClick(`#lambda编程-nav`)">
									Lambda编程
								</a>
</li>
<ul>
<li>
<a href="#%e5%87%bd%e6%95%b0%e5%bc%8fapi" id="函数式api-nav" onclick="onNavClick(`#函数式api-nav`)">
									函数式API
								</a>
</li>
<ul>
<li>
<a href="#maxby" id="maxby-nav" onclick="onNavClick(`#maxby-nav`)">
									maxBy
								</a>
</li>
</ul>
<li>
<a href="#map" id="map-nav" onclick="onNavClick(`#map-nav`)">
									map
								</a>
</li>
<ul>
<li>
<a href="#filter" id="filter-nav" onclick="onNavClick(`#filter-nav`)">
									filter
								</a>
</li>
<li>
<a href="#any" id="any-nav" onclick="onNavClick(`#any-nav`)">
									any
								</a>
</li>
<li>
<a href="#all" id="all-nav" onclick="onNavClick(`#all-nav`)">
									all
								</a>
</li>
</ul>
<li>
<a href="#java%e5%87%bd%e6%95%b0%e5%bc%8fapi" id="java函数式api-nav" onclick="onNavClick(`#java函数式api-nav`)">
									Java函数式API
								</a>
</li>
</ul>
<li>
<a href="#%e7%a9%ba%e6%8c%87%e9%92%88%e6%a3%80%e6%9f%a5" id="空指针检查-nav" onclick="onNavClick(`#空指针检查-nav`)">
									空指针检查
								</a>
</li>
</ul>
</ul></div>
</div>
</div>
</div>
</div>
<transition name="fade">
<div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav class="navbar sticky-top navbar-light single-column-nav-container" id="navBar">
<div class="nav-background" id="navBackground"></div>
<div class="container container-narrow nav-content">
<button class="nav-dropdown-toggle" id="nav_dropdown_btn" type="button" v-on:click="toggleDrawer">
<i class="material-icons">
                menu
            </i>
</button>
<a class="navbar-brand" href="https://ntutn.top/" id="navTitle">
            归零幻想
        </a>
<button class="nav-darkmode-toggle" id="darkModeToggleButton2" type="button">
<i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
</button>
</div>
</nav>
<div class="single-column-header-container" id="pageHead" v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
<a href="https://ntutn.top/">
<div class="single-column-header-title">归零幻想</div>
<div class="single-column-header-subtitle">零点还不算熬夜</div>
</a>
</div>
<div id="content">
<div class="stream-container" id="streamContainer">
<div class="post-list-container post-list-container-shadow">
<div class="post">
<div class="post-head-wrapper-text-only">
<div class="post-title">
                    android项目开发：Kotlin
                    
                    <div class="post-subtitle">
                        第一行代码的学习记录，这篇是Kotlin的语法熟悉。
                    </div>
<div class="post-meta">
<time itemprop="datePublished">
                            2021-10-12 03:11
                        </time>
<i class="material-icons" style="">folder</i>
<a href="/categories/%E5%AD%A6%E4%B9%A0">学习</a>
                                 
                        

                        
                            <i class="material-icons" style="">label</i>
<a href="/tags/android">Android</a>
                                 
                            
                                <a href="/tags/%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81">第一行代码</a>
                                 
                            
                                <a href="/tags/kotlin">Kotlin</a>
                                 
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            20 min
                            
                            54 s.
                        
                    </div>
</div>
</div>
<div class="post-body-wrapper">
<div class="post-body" v-pre="">
<!-- raw HTML omitted -->
<h1 id="kotlin">Kotlin</h1>
<h2 id="变量和函数">变量和函数</h2>
<h3 id="变量">变量</h3>
<p>用<code>var</code>和<code>val</code>定义变量，并有类型自动推导的支持。</p>
<p><code>val</code>用来声明一个不可变的变量，<code>var</code>用来声明一个可变的变量。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">val</span> a = <span style="color:#b452cd">10</span>
<span style="color:#8b008b;font-weight:bold">var</span> b: Int = <span style="color:#b452cd">12</span>
</code></pre></div><p>Kotlin完全抛弃了java中的基本数据类型，完全使用对象数据类型。</p>
<table>
<thead>
<tr>
<th>java基本数据类型</th>
<th>Kotlin对象数据类型</th>
<th>数据类型说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>Int</td>
<td>整型</td>
</tr>
<tr>
<td>long</td>
<td>Long</td>
<td>长整型</td>
</tr>
<tr>
<td>short</td>
<td>Short</td>
<td>短整型</td>
</tr>
<tr>
<td>float</td>
<td>Float</td>
<td>单精度浮点型</td>
</tr>
<tr>
<td>double</td>
<td>Double</td>
<td>双精度浮点型</td>
</tr>
<tr>
<td>boolean</td>
<td>Boolean</td>
<td>布尔型</td>
</tr>
<tr>
<td>char</td>
<td>Char</td>
<td>字符型</td>
</tr>
<tr>
<td>byte</td>
<td>Byte</td>
<td>字节型</td>
</tr>
</tbody>
</table>
<h3 id="函数">函数</h3>
<p>语法：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>(args: Array&lt;String&gt;) {
    println(<span style="color:#cd5555">"Hello World!"</span>)
}
</code></pre></div><p>Kotlin中的函数在无必要时可以省略很多东西：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">kotlin.math.max</span>
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">largerNumber</span>(a: Int, b: Int) = max(a, b)
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>(args: Array&lt;String&gt;) {
    <span style="color:#8b008b;font-weight:bold">val</span> a = <span style="color:#b452cd">3</span>
    <span style="color:#8b008b;font-weight:bold">val</span> b = <span style="color:#b452cd">5</span>
    println(<span style="color:#cd5555">"The larger number of a and b is </span><span style="color:#cd5555">${largerNumber(a, b)}</span><span style="color:#cd5555">"</span>)
}
</code></pre></div><h2 id="程序的逻辑控制">程序的逻辑控制</h2>
<h3 id="if">if</h3>
<p>与java中的if语句相比，Kotlin中的if是可以有返回值的。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">judge</span>(score: Int) = <span style="color:#8b008b;font-weight:bold">if</span> (score &gt;= <span style="color:#b452cd">60</span>) <span style="color:#cd5555">"你及格了"</span> <span style="color:#8b008b;font-weight:bold">else</span> <span style="color:#cd5555">"你还需要多努力"</span>
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    println(judge(<span style="color:#b452cd">55</span>))
    println(judge(<span style="color:#b452cd">66</span>))
}
</code></pre></div><p>与此同时，Kotlin不再有java中的三元运算符<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" role="doc-noteref">1</a></sup>，语义上清晰了很多。</p>
<h3 id="when条件语句">when条件语句</h3>
<p>类似于java中的switch语句，根据变量的值执行不同的逻辑。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">judge</span>(score: Int) = <span style="color:#8b008b;font-weight:bold">if</span> (score &gt;= <span style="color:#b452cd">60</span>) <span style="color:#cd5555">"你及格了"</span> <span style="color:#8b008b;font-weight:bold">else</span> <span style="color:#cd5555">"你还需要多努力"</span>
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">getScore</span>(name: String) = <span style="color:#8b008b;font-weight:bold">when</span> (name) {
    <span style="color:#cd5555">"Tom"</span> -&gt; <span style="color:#b452cd">78</span>
    <span style="color:#cd5555">"Jack"</span> -&gt; <span style="color:#b452cd">35</span>
    <span style="color:#cd5555">"Jerry"</span> -&gt; <span style="color:#b452cd">84</span>
    <span style="color:#cd5555">"Lee"</span> -&gt; <span style="color:#b452cd">57</span>
    <span style="color:#8b008b;font-weight:bold">else</span> -&gt; <span style="color:#b452cd">0</span>
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    println(judge(getScore(<span style="color:#cd5555">"Tom"</span>)))
    println(judge(getScore(<span style="color:#cd5555">"Jack"</span>)))
    println(judge(getScore(<span style="color:#cd5555">"Bill"</span>)))
}
</code></pre></div><p>对我来说，最令人振奋的是再也不需要在每个分支里面都写个break了。其次when也是有返回值的，这和其他特性组合写出来的代码非常简洁优雅。</p>
<p>写个小demo吧。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">Speakable</span> {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>()
}
<span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Dog</span> : Speakable {
    <span style="color:#8b008b;font-weight:bold">override</span> <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() {
        println(<span style="color:#cd5555">"汪汪汪"</span>)
    }
}
<span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Cat</span> : Speakable {
    <span style="color:#8b008b;font-weight:bold">override</span> <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() {
        println(<span style="color:#cd5555">"喵喵喵"</span>)
    }
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">climb</span>() {
        println(<span style="color:#cd5555">"小猫会爬树"</span>)
    }
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">generateAnimal</span>(): Speakable? = <span style="color:#8b008b;font-weight:bold">when</span> ((<span style="color:#b452cd">1.</span>.<span style="color:#b452cd">3</span>).random()) {
    <span style="color:#b452cd">1</span> -&gt; Dog()
    <span style="color:#b452cd">2</span> -&gt; Cat()
    <span style="color:#8b008b;font-weight:bold">else</span> -&gt; <span style="color:#8b008b;font-weight:bold">null</span>
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    <span style="color:#8b008b;font-weight:bold">when</span> (<span style="color:#8b008b;font-weight:bold">val</span> animal = generateAnimal()) {
        <span style="color:#8b008b;font-weight:bold">is</span> Dog -&gt; {
            println(<span style="color:#cd5555">"生成的动物是小狗"</span>)
            animal.speak()
        }
        <span style="color:#8b008b;font-weight:bold">is</span> Cat -&gt; {
            println(<span style="color:#cd5555">"生成的动物是小猫"</span>)
            animal.speak()
            animal.climb()
        }
        <span style="color:#8b008b;font-weight:bold">else</span> -&gt; println(<span style="color:#cd5555">"生成动物时出现问题"</span>)
    }
}
</code></pre></div><h3 id="循环语句">循环语句</h3>
<p>Kotlin中有两类循环，其中<code>while</code>循环与java学过的while循环非常相似，只说下有差异的<code>for</code>循环吧。</p>
<p>Kotlin的for循环只有for..in式的了，如<code>for(i in list)</code>。</p>
<p>但有时对数组下标进行遍历还是有必要的。于是我们要先了解下Kotlin的<code>区间</code>的概念。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">val</span> range = <span style="color:#b452cd">1.</span>.<span style="color:#b452cd">10</span>
</code></pre></div><p>这表示<code>[1,10]</code>。但很多时候，我们需要左开右闭区间，比如数组有三个元素，我们需要<code>[0,3)</code>表示数组的下标。此时可以使用<code>util</code>关键字。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">val</span> indexRange = <span style="color:#b452cd">0</span> util <span style="color:#b452cd">3</span>
</code></pre></div><p>有了range再和前面的for配合就完全可以替代之前java里面的for的作用了：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">val</span> array = arrayOf(<span style="color:#cd5555">"Bob"</span>, <span style="color:#cd5555">"John"</span>, <span style="color:#cd5555">"Jackson"</span>)
<span style="color:#8b008b;font-weight:bold">for</span> (i <span style="color:#8b008b;font-weight:bold">in</span> <span style="color:#b452cd">0</span> util array.size) {
    println(<span style="color:#cd5555">"</span><span style="color:#cd5555">$i</span><span style="color:#cd5555">:</span><span style="color:#cd5555">${array[i]}</span><span style="color:#cd5555">"</span>)
}
</code></pre></div><p>此外，还可以用<code>step</code>指定步长值，实现”隔几个输出一次“的效果：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">for</span> (i <span style="color:#8b008b;font-weight:bold">in</span> <span style="color:#b452cd">0</span> util <span style="color:#b452cd">10</span> step <span style="color:#b452cd">2</span>) {
    println(i)
}
</code></pre></div><p>如果需要10循环到1,则需要<code>downTo</code>关键字，</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">for</span> (i <span style="color:#8b008b;font-weight:bold">in</span> <span style="color:#b452cd">10</span> downTo <span style="color:#b452cd">1</span>) {
    println(i)
}
</code></pre></div><!-- raw HTML omitted -->
<h2 id="面向对象编程">面向对象编程</h2>
<h3 id="类与对象">类与对象</h3>
<p>与java的class相比Kotlin的class看上去没有多少改变，但创建对象不用new了。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Person</span>(<span style="color:#8b008b;font-weight:bold">val</span> name: String) {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() = <span style="color:#cd5555">"</span><span style="color:#cd5555">$name</span><span style="color:#cd5555"> is speaking."</span>
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    Person(<span style="color:#cd5555">"Jack"</span>).speak()
}
</code></pre></div><h3 id="继承与构造函数">继承与构造函数</h3>
<p>与java类似，Kotlin仍然是单继承，可以继承一个类实现多个接口。但继承的写法与java略有不同。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">open</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Animal</span><span style="color:#228b22">//非抽象类只有带了open才可以继承
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">Speakable</span> {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>()
}
<span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Dog</span> : Animal(), Speakable {
    <span style="color:#8b008b;font-weight:bold">override</span> <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() {
        println(<span style="color:#cd5555">"汪汪汪"</span>)
    }
}
<span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Cat</span> : Animal(), Speakable {
    <span style="color:#8b008b;font-weight:bold">override</span> <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">speak</span>() {
        println(<span style="color:#cd5555">"喵喵喵"</span>)
    }
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">climb</span>() {
        println(<span style="color:#cd5555">"小猫会爬树"</span>)
    }
}
</code></pre></div><p>Kotlin中的构造函数分为主构造函数和次构造函数。如：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Student</span>(<span style="color:#8b008b;font-weight:bold">val</span> sno: String, <span style="color:#8b008b;font-weight:bold">val</span> grade: Int, name: String, age: Int) {
    <span style="color:#8b008b;font-weight:bold">constructor</span>(name: String, age: Int) : <span style="color:#8b008b;font-weight:bold">this</span>(<span style="color:#cd5555">""</span>, <span style="color:#b452cd">0</span>, name, age)
    <span style="color:#8b008b;font-weight:bold">constructor</span>() : <span style="color:#8b008b;font-weight:bold">this</span>(<span style="color:#cd5555">""</span>, <span style="color:#b452cd">0</span>)
    <span style="color:#8b008b;font-weight:bold">init</span> {
        println(<span style="color:#cd5555">"</span><span style="color:#cd5555">$age</span><span style="color:#cd5555"> 的 </span><span style="color:#cd5555">$name</span><span style="color:#cd5555"> 被初始化了。"</span>)
    }
}
</code></pre></div><p>次构造函数必须调用主构造函数（如果有），继承一个类必须调用他的构造函数（这也是为什么常常继承的类后面带着个括号）。</p>
<blockquote>
<p>Kotlin函数的参数可以有默认值的，大多数情况根本不需要使用多个构造函数。
主构造函数中<code>val</code>和<code>var</code>标记的变量将直接成为类的属性，没有这个标记的变量则只能在init block中访问。</p>
</blockquote>
<h3 id="接口">接口</h3>
<p>接口与java的接口是类似的。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">Study</span> {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">readBooks</span>()
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doHomework</span>() {
        println(<span style="color:#cd5555">"Do homework default implementation"</span>)
    }
}
</code></pre></div><p>java与Kotlin中的可见性修饰略有不同。</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>java</th>
<th>Kotlin</th>
</tr>
</thead>
<tbody>
<tr>
<td>public</td>
<td>所有类可见</td>
<td>所有类可见（默认）</td>
</tr>
<tr>
<td>private</td>
<td>当前类可见</td>
<td>当前类可见</td>
</tr>
<tr>
<td>protected</td>
<td>当前类、子类、同一包路径下的类可见</td>
<td>当前类、子类可见</td>
</tr>
<tr>
<td>default</td>
<td>同一包路径下的类可见</td>
<td>无</td>
</tr>
<tr>
<td>internal</td>
<td>无</td>
<td>同一模块中的类可见</td>
</tr>
</tbody>
</table>
<h3 id="数据类与单例类">数据类与单例类</h3>
<p>数据类在当今的系统设计中占据了重要的地位，他们格式非常固定，一般实现各种构造函数、getter和setter，重写<code>equals()</code>、<code>hashCode()</code>、<code>toString()</code>
这几个方法，真的写腻了。很多ide都提供了一键生成这些样板代码的方法，更有项目Lombok添加个注解在编译时生成这些方法<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" role="doc-noteref">2</a></sup>。</p>
<p>而Kotlin中对于数据类有了专门的支持。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">data</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Student</span>(<span style="color:#8b008b;font-weight:bold">val</span> sno: String, <span style="color:#8b008b;font-weight:bold">val</span> name: String, <span style="color:#8b008b;font-weight:bold">var</span> age: Int)
</code></pre></div><p>idea对于Kotlin有很好的支持。我们用下面的步骤将上面的代码转换为java形式：</p>
<ol>
<li>Tools-&gt;Kotlin-&gt;Show Kotlin ByteCode</li>
<li>Decompile</li>
</ol>
<p>得到的代码如下：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">kotlin.Metadata</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">kotlin.jvm.internal.Intrinsics</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.jetbrains.annotations.NotNull</span>;
<span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">org.jetbrains.annotations.Nullable</span>;
<span style="color:#707a7c">@Metadata</span>(
        mv = {1, 4, 0},
        bv = {1, 0, 3},
        k = 1,
        d1 = {<span style="color:#cd5555">"\u0000\"\n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0000\n\u0002\u0010\u000e\n\u0002\b\u0002\n\u0002\u0010\b\n\u0002\b\r\n\u0002\u0010\u000b\n\u0002\b\u0004\b\u0086\b\u0018\u00002\u00020\u0001B\u001d\u0012\u0006\u0010\u0002\u001a\u00020\u0003\u0012\u0006\u0010\u0004\u001a\u00020\u0003\u0012\u0006\u0010\u0005\u001a\u00020\u0006¢\u0006\u0002\u0010\u0007J\t\u0010\u000f\u001a\u00020\u0003HÆ\u0003J\t\u0010\u0010\u001a\u00020\u0003HÆ\u0003J\t\u0010\u0011\u001a\u00020\u0006HÆ\u0003J'\u0010\u0012\u001a\u00020\u00002\b\b\u0002\u0010\u0002\u001a\u00020\u00032\b\b\u0002\u0010\u0004\u001a\u00020\u00032\b\b\u0002\u0010\u0005\u001a\u00020\u0006HÆ\u0001J\u0013\u0010\u0013\u001a\u00020\u00142\b\u0010\u0015\u001a\u0004\u0018\u00010\u0001HÖ\u0003J\t\u0010\u0016\u001a\u00020\u0006HÖ\u0001J\t\u0010\u0017\u001a\u00020\u0003HÖ\u0001R\u001a\u0010\u0005\u001a\u00020\u0006X\u0086\u000e¢\u0006\u000e\n\u0000\u001a\u0004\b\b\u0010\t\"\u0004\b\n\u0010\u000bR\u0011\u0010\u0004\u001a\u00020\u0003¢\u0006\b\n\u0000\u001a\u0004\b\f\u0010\rR\u0011\u0010\u0002\u001a\u00020\u0003¢\u0006\b\n\u0000\u001a\u0004\b\u000e\u0010\r¨\u0006\u0018"</span>},
        d2 = {<span style="color:#cd5555">"LStudent;"</span>, <span style="color:#cd5555">""</span>, <span style="color:#cd5555">"sno"</span>, <span style="color:#cd5555">""</span>, <span style="color:#cd5555">"name"</span>, <span style="color:#cd5555">"age"</span>, <span style="color:#cd5555">""</span>, <span style="color:#cd5555">"(Ljava/lang/String;Ljava/lang/String;I)V"</span>, <span style="color:#cd5555">"getAge"</span>, <span style="color:#cd5555">"()I"</span>, <span style="color:#cd5555">"setAge"</span>, <span style="color:#cd5555">"(I)V"</span>, <span style="color:#cd5555">"getName"</span>, <span style="color:#cd5555">"()Ljava/lang/String;"</span>, <span style="color:#cd5555">"getSno"</span>, <span style="color:#cd5555">"component1"</span>, <span style="color:#cd5555">"component2"</span>, <span style="color:#cd5555">"component3"</span>, <span style="color:#cd5555">"copy"</span>, <span style="color:#cd5555">"equals"</span>, <span style="color:#cd5555">""</span>, <span style="color:#cd5555">"other"</span>, <span style="color:#cd5555">"hashCode"</span>, <span style="color:#cd5555">"toString"</span>, <span style="color:#cd5555">"kotlin-learning.main"</span>}
)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Student</span> {
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">final</span> String sno;
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#8b008b;font-weight:bold">final</span> String name;
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#00688b;font-weight:bold">int</span> age;
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> String <span style="color:#008b45">getSno</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span>;
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> String <span style="color:#008b45">getName</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">getAge</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">setAge</span>(<span style="color:#00688b;font-weight:bold">int</span> var1) {
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> = var1;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#008b45">Student</span>(<span style="color:#707a7c">@NotNull</span> String sno, <span style="color:#707a7c">@NotNull</span> String name, <span style="color:#00688b;font-weight:bold">int</span> age) {
        Intrinsics.<span style="color:#658b00">checkNotNullParameter</span>(sno, <span style="color:#cd5555">"sno"</span>);
        Intrinsics.<span style="color:#658b00">checkNotNullParameter</span>(name, <span style="color:#cd5555">"name"</span>);
        <span style="color:#8b008b;font-weight:bold">super</span>();
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span> = sno;
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span> = name;
        <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> = age;
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> String <span style="color:#008b45">component1</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span>;
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> String <span style="color:#008b45">component2</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">component3</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span>;
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> Student <span style="color:#008b45">copy</span>(<span style="color:#707a7c">@NotNull</span> String sno, <span style="color:#707a7c">@NotNull</span> String name, <span style="color:#00688b;font-weight:bold">int</span> age) {
        Intrinsics.<span style="color:#658b00">checkNotNullParameter</span>(sno, <span style="color:#cd5555">"sno"</span>);
        Intrinsics.<span style="color:#658b00">checkNotNullParameter</span>(name, <span style="color:#cd5555">"name"</span>);
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">new</span> Student(sno, name, age);
    }
    <span style="color:#228b22">// $FF: synthetic method
</span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> Student <span style="color:#008b45">copy$default</span>(Student var0, String var1, String var2, <span style="color:#00688b;font-weight:bold">int</span> var3, <span style="color:#00688b;font-weight:bold">int</span> var4, Object var5) {
        <span style="color:#8b008b;font-weight:bold">if</span> ((var4 &amp; 1) != 0) {
            var1 = var0.<span style="color:#658b00">sno</span>;
        }
        <span style="color:#8b008b;font-weight:bold">if</span> ((var4 &amp; 2) != 0) {
            var2 = var0.<span style="color:#658b00">name</span>;
        }
        <span style="color:#8b008b;font-weight:bold">if</span> ((var4 &amp; 4) != 0) {
            var3 = var0.<span style="color:#658b00">age</span>;
        }
        <span style="color:#8b008b;font-weight:bold">return</span> var0.<span style="color:#658b00">copy</span>(var1, var2, var3);
    }
    <span style="color:#707a7c">@NotNull</span>
    <span style="color:#8b008b;font-weight:bold">public</span> String <span style="color:#008b45">toString</span>() {
        <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#cd5555">"Student(sno="</span> + <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span> + <span style="color:#cd5555">", name="</span> + <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span> + <span style="color:#cd5555">", age="</span> + <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> + <span style="color:#cd5555">")"</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">hashCode</span>() {
        String var10000 = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span>;
        <span style="color:#00688b;font-weight:bold">int</span> var1 = (var10000 != <span style="color:#8b008b;font-weight:bold">null</span> ? var10000.<span style="color:#658b00">hashCode</span>() : 0) * 31;
        String var10001 = <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span>;
        <span style="color:#8b008b;font-weight:bold">return</span> (var1 + (var10001 != <span style="color:#8b008b;font-weight:bold">null</span> ? var10001.<span style="color:#658b00">hashCode</span>() : 0)) * 31 + <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span>;
    }
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#00688b;font-weight:bold">boolean</span> <span style="color:#008b45">equals</span>(<span style="color:#707a7c">@Nullable</span> Object var1) {
        <span style="color:#8b008b;font-weight:bold">if</span> (<span style="color:#8b008b;font-weight:bold">this</span> != var1) {
            <span style="color:#8b008b;font-weight:bold">if</span> (var1 <span style="color:#8b008b;font-weight:bold">instanceof</span> Student) {
                Student var2 = (Student) var1;
                <span style="color:#8b008b;font-weight:bold">if</span> (Intrinsics.<span style="color:#658b00">areEqual</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">sno</span>, var2.<span style="color:#658b00">sno</span>) &amp;&amp; Intrinsics.<span style="color:#658b00">areEqual</span>(<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">name</span>, var2.<span style="color:#658b00">name</span>) &amp;&amp; <span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">age</span> == var2.<span style="color:#658b00">age</span>) {
                    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">true</span>;
                }
            }
            <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">false</span>;
        } <span style="color:#8b008b;font-weight:bold">else</span> {
            <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">true</span>;
        }
    }
}
</code></pre></div><p>孰优孰劣，一目了然。</p>
<p>类似的，Kotlin也对单例类提供了支持。如：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">object</span> <span style="color:#008b45;font-weight:bold">Singleton</span> {
    <span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">singletonTest</span>() {
        println(<span style="color:#cd5555">"Singleton test is called."</span>)
    }
}
</code></pre></div><p>这和你费了半天劲写出来的java代码作用是一样的：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">import</span> <span style="color:#008b45;text-decoration:underline">kotlin.Metadata</span>;
<span style="color:#707a7c">@Metadata</span>(
        mv = {1, 4, 0},
        bv = {1, 0, 3},
        k = 1,
        d1 = {<span style="color:#cd5555">"\u0000\u0012\n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0002\b\u0002\n\u0002\u0010\u0002\n\u0000\bÆ\u0002\u0018\u00002\u00020\u0001B\u0007\b\u0002¢\u0006\u0002\u0010\u0002J\u0006\u0010\u0003\u001a\u00020\u0004¨\u0006\u0005"</span>},
        d2 = {<span style="color:#cd5555">"LSingleton;"</span>, <span style="color:#cd5555">""</span>, <span style="color:#cd5555">"()V"</span>, <span style="color:#cd5555">"singletonTest"</span>, <span style="color:#cd5555">""</span>, <span style="color:#cd5555">"kotlin-learning.main"</span>}
)
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Singleton</span> {
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">final</span> Singleton INSTANCE;
    <span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">final</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">singletonTest</span>() {
        String var1 = <span style="color:#cd5555">"Singleton test is called."</span>;
        <span style="color:#00688b;font-weight:bold">boolean</span> var2 = <span style="color:#8b008b;font-weight:bold">false</span>;
        System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(var1);
    }
    <span style="color:#8b008b;font-weight:bold">private</span> <span style="color:#008b45">Singleton</span>() {
    }
    <span style="color:#8b008b;font-weight:bold">static</span> {
        Singleton var0 = <span style="color:#8b008b;font-weight:bold">new</span> Singleton();
        INSTANCE = var0;
    }
}
</code></pre></div><h2 id="lambda编程">Lambda编程</h2>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    <span style="color:#8b008b;font-weight:bold">val</span> map = mapOf(<span style="color:#cd5555">"Apple"</span> to <span style="color:#b452cd">1</span>, <span style="color:#cd5555">"Banana"</span> to <span style="color:#b452cd">2</span>, <span style="color:#cd5555">"Orange"</span> to <span style="color:#b452cd">3</span>, <span style="color:#cd5555">"Pear"</span> to <span style="color:#b452cd">4</span>, <span style="color:#cd5555">"Grape"</span> to <span style="color:#b452cd">5</span>)
    <span style="color:#8b008b;font-weight:bold">for</span> ((fruit, number) <span style="color:#8b008b;font-weight:bold">in</span> map) {
        println(<span style="color:#cd5555">"fruit is </span><span style="color:#cd5555">$fruit</span><span style="color:#cd5555">, number is </span><span style="color:#cd5555">$number</span><span style="color:#cd5555">"</span>)
    }
}
</code></pre></div><h3 id="函数式api">函数式API</h3>
<h4 id="maxby">maxBy</h4>
<p>集合中最长的字符串。</p>
<h3 id="map">map</h3>
<p>将集合中每个元素都映射到另一个元素。</p>
<h4 id="filter">filter</h4>
<p>过滤集合中的数据。</p>
<h4 id="any">any</h4>
<p>至少有一个元素满足条件。</p>
<h4 id="all">all</h4>
<p>所有元素都满足条件。</p>
<h3 id="java函数式api">Java函数式API</h3>
<p>对于java中的单抽象方法可使用函数式API。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin">Thread {
    println(<span style="color:#cd5555">"Thread is running"</span>)
}.start()
</code></pre></div><h2 id="空指针检查">空指针检查</h2>
<p>写java时最常见的错误就是<code>java.lang.NullPointerException</code>了吧。在Kotlin中，情况有一些改善。</p>
<p>与java不同，Kotlin中的变量默认是不可空的。</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doStudy</span>(study: Study) {
    study.readBooks()
    study.doHomework()
}
</code></pre></div><p>如果你给这个函数传一个可能为null的值，在编译期间就会得到错误提示。</p>
<p>当然，很多情况我们还是需要让我们的函数接受一个可空的值的，则可以用这样的写法：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doStudy</span>(study: Study?) {
    <span style="color:#8b008b;font-weight:bold">if</span> (study != <span style="color:#8b008b;font-weight:bold">null</span>) {
        study.readBooks()
        study.doHomework()
    }
}
</code></pre></div><p>但在Kotlin中还有更好的方法：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doStudy</span>(study: Study?) {
    study?.readBooks()
    study?.doHomework()
}
</code></pre></div><p>用上<code>let</code>我们还可以写得更优雅：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">doStudy</span>(study: Study?) {
    study?.let {
        <span style="color:#8b008b;font-weight:bold">it</span>.readBooks()
        <span style="color:#8b008b;font-weight:bold">it</span>.doHomework()
    }
}
</code></pre></div><p><code>?.</code>表示只有不为空时才正常调用。</p>
<p>有时我们需要这样的逻辑：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">getTextLength</span>(text: String?): Int {
    <span style="color:#8b008b;font-weight:bold">if</span> (text != <span style="color:#8b008b;font-weight:bold">null</span>) {
        <span style="color:#8b008b;font-weight:bold">return</span> text.length
    }
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#b452cd">0</span>
}
</code></pre></div><p>Kotlin也有个方便的操作符：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">getTextLength</span>(text: String?) = text?.length ?: <span style="color:#b452cd">0</span>
</code></pre></div><p><code>?:</code>表示前面为空时返回后面的值。</p>
<p>当然，有些业务逻辑中Kotlin不一定能正确推断出你的变量是否可能为空，这时Kotlin也提供了让你自己操纵它的机会：</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-kotlin" data-lang="kotlin"><span style="color:#8b008b;font-weight:bold">var</span> content: String? = <span style="color:#8b008b;font-weight:bold">null</span>
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">initContent</span>() {
    content = <span style="color:#cd5555">"https://ntutn.top"</span>
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">main</span>() {
    initContent()
    <span style="color:#8b008b;font-weight:bold">if</span> (content != <span style="color:#8b008b;font-weight:bold">null</span>) {
        printContent()
    }
}
<span style="color:#8b008b;font-weight:bold">fun</span> <span style="color:#008b45">printContent</span>() {
    println(content!!)
}
</code></pre></div><section class="footnotes" role="doc-endnotes">
<hr/>
<ol>
<li id="fn:1" role="doc-endnote">
<p>参考<a href="https://www.w3cschool.cn/java/java-ternary-operator.html">Java中的三元运算符</a> <a class="footnote-backref" href="#fnref:1" role="doc-backlink">↩︎</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p><a href="https://projectlombok.org/">Lombok</a>，用注解的方式简化java代码，但要求使用的ide必须安装lombok插件才能正确识别lombok生成的代码，有人认为这是在”强奸队友“。另外lombok的实现调用了jdk未公开的方法也引发争议。 <a class="footnote-backref" href="#fnref:2" role="doc-backlink">↩︎</a></p>
</li>
</ol>
</section>
<hr id="EOF" width="100%"/>
<p style="color:#777;">最后修改于 2021-10-12</p>
</div>
</div>
<nav class="post-pagination">
<a class="newer-posts" href="/posts/%E6%8C%81%E4%B9%85%E5%8C%96/">
			下回<br/>android项目开发：持久化
                </a>
<a class="older-posts" href="/posts/java%E9%BB%98%E8%AE%A4%E4%BF%AE%E9%A5%B0%E7%AC%A6%E9%97%AE%E9%A2%98/">
			上回<br/>Java默认修饰符问题
                </a>
</nav>
<div class="post-comment-wrapper">
<script async="" crossorigin="anonymous" issue-term="title" label="" repo="zerofancy/zerofancy.github.io" src="https://utteranc.es/client.js" theme="github-light">
</script>
</div>
</div>
</div>
</div>
</div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br/>
移植自 <a href="https://mak1t0.cc/" rel="noreferrer noopener" target="_blank">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" rel="noreferrer noopener" target="_blank">Journal.</a> <br/>
<br/>

©
	
	CC BY-SA 4.0
	
</div>
</div>
<script src="/js/journal.js"></script></body>
</html>
